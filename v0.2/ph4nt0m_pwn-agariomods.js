/*DO NOT ADD THIS SCRIPT! ADD THE OTHER USERSCRIPTS! THIS WILL BE AUTOMATICALLY LINKED FROM OMNIPHASER's WEBSITE!*/
window.debug=window.localStorage.debug?window.localStorage.debug=="true":!1;window.onerror=function(a,b,c,d){if(!!~a.indexOf("RangeError"))return;else if(c==1)window.onmoderror("["+c+":"+d+"] '"+a+"'");}
window.onmoderror=function(a){if(window.debug=="true"||window.location.search.substr(0,9)=="?fallback")return;if(!window.ignore&&confirm("An error was detected!\n\n"+a+"\n\nFallback to Vanilla Agar.io?")){window.extToggled=true;window.onbeforeunload=function(){};window.location='http://agar.io/?fallback'+window.location.hash;}else{window.ignore=!0}};try{(function(){window.addEventListener('message',function(e){if(e.data=="ScriptDisable"){window.extToggled=true;window.location=window.location;}},false);var handledHash=handleHash();if(handledHash&&window.debug!=="true"){history.replaceState2=history.replaceState;history.replaceState=function(a,b,c){history.replaceState2(a,b,"/?fallback"+c.substr(1));}
window.onhashchange=function(){history.replaceState2({},document.title,'/?fallback'+window.location.hash)};jQuery('#agario-main-buttons').append('<button type="button" id="opnBrowser" onclick="openServerbrowser();" style="margin-top:4px;width:100%" class="btn btn-success">Agariomods Private Servers</button>');addsbui(true);window.openServerbrowser=openServerbrowser;window.closeServerbrowser=closeServerbrowser;window.getServers=getServers;window.serverinfo=serverinfo;window.directserverinfo=directserverinfo;window.hgm=hgm;window.connectPrivate=function(a,b){connect("ws://"+a.toLowerCase().replace(/ /g,"")+'.iomods.com:'+150+b,"")};window.onbeforeunload=function(){if(!window.extToggled)return'Are you sure you want to quit agar.io?'};return;}else if(handledHash===false){window.onload=handleHash;}
var sty=document.createElement("style");sty.id="loadercss";sty.innerHTML='#load{z-index:3000;position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,0.4);color:#fff;font-family:"Segoe UI","Microsoft YaHei"}.le *{padding:0;margin:0 auto;list-style:none;box-sizing:border-box;outline:none;font-weight:400}.le{text-align:center;margin:50vh auto;transform:translateY(-50%);position:relative;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-o-box-sizing:border-box;box-sizing:border-box;width:100px;height:100px}.le > span,.le > span:before,.le > span:after{content:"";display:block;border-radius:50%;border:2px solid #fff;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.le > span{width:100%;height:100%;top:0;left:0;border-left-color:transparent;-webkit-animation:effect-2 2s infinite linear;-moz-animation:effect-2 2s infinite linear;-ms-animation:effect-2 2s infinite linear;-o-animation:effect-2 2s infinite linear;animation:effect-2 2s infinite linear}.le > span:before{width:75%;height:75%;border-right-color:transparent}.le > span:after{width:50%;height:50%;border-bottom-color:transparent}@-webkit-keyframes effect-2{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes effect-2{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}';document.head.appendChild(sty);$("body").append('<div id="load"><div class="le"><span></span></div></div>');document.getElementById("overlays").style.display='none';document.getElementById("connecting").style.display='none';var ourskins="0chan;18-25;1up;360nati0n;8ball;UmguwJ0;aa9skillz;ace;adamzonetopmarks;advertisingmz;agar youtube;agariomods.com;al sahim;alaska;albania;alchestbreach;alexelcapo;algeria;am3nlc;amoodiesqueezie;amway921wot;amyleethirty3;anarchy;android;angrybirdsnest;angryjoeshow;animebromii;anonymous;antvenom;aperture;apple;arcadego;assassinscreed;atari;athenewins;authenticgames;avatar;aviatorgaming;awesome;awwmuffin;aypierre;baka;balenaproductions;bandaid;bane;baseball;bashurverse;basketball;bateson87;batman;battlefield;bdoubleo100;beats;bebopvox;belarus;belgium;bender;benderchat;bereghostgames;bert;bestcodcomedy;bielarus;bitcoin;bjacau1;bjacau2;black widow;blackiegonth;blitzwinger;blobfish;bluexephos;bluh;blunty3000;bobross;bobsaget;bodil30;bodil40;bohemianeagle;boo;boogie2988;borg;bowserbikejustdance;bp;breakfast;breizh;brksedu;buckballs;burgundy;butters;buzzbean11;bystaxx;byzantium;calfreezy;callofduty;captainsparklez;casaldenerd;catalonia;catalunya;catman;cavemanfilms;celopand;chaboyyhd;chaika;chaosxsilencer;chaoticmonki;charlie615119;charmander;chechenya;checkpointplus;cheese;chickfila;chimneyswift11;chocolate;chrisandthemike;chrisarchieprods;chrome;chucknorris;chuggaaconroy;cicciogamer89;cinnamontoastken;cirno;cj;ckaikd0021;clanlec;clashofclansstrats;cling on;cobanermani456;coca cola;codqg;coisadenerd;cokacola;colombia;colombiaa;commanderkrieger;communitygame;concrafter;consolesejogosbrasil;controless ;converse;cookie;coolifegame;coookie;cornella;cornella;coruja;craftbattleduty;creeper;creepydoll;criken2;criousgamers;crispyconcords;cristian4games;csfb;cuba;cubex55;cyberman65;cypriengaming;cyprus;czech;czechia;czechrepublic;d7297ut;d7oomy999;dagelijkshaadee;daithidenogla;darduinmymenlon;darksideofmoon;darksydephil;darkzerotv;dashiegames;day9tv;deadloxmc;deadpool;deal with it;deathly hallows;deathstar;debitorlp;deigamer;demon;derp;desu;dhole;diabl0x9;dickbutt;dilleron;dilleronplay;direwolf20;dissidiuswastaken;dnb;dnermc;doge;doggie;dolan;domo;domokun;donald;dong;donut;doraemon;dotacinema;douglby;dpjsc08;dreamcast;drift0r;drunken;dspgaming;dusdavidgames;dykgaming;ea;easports;easportsfootball;eatmydiction1;eavision;ebin;eeoneguy;egg;egoraptor;eguri89games;egypt;eksi;electrokitty;electronicartsde;elementanimation;elezwarface;eligorko;elrubiusomg;enzoknol;eowjdfudshrghk;epicface;ethoslab;exetrizegamer;expand;eye;facebook;fantabobgames;fast forward;fastforward;favijtv;fazeclan;fbi;fer0m0nas;fernanfloo;fgteev;fidel;fiji;finn;fir4sgamer;firefox;fishies;flash;florida;fnatic;fnaticc;foe;folagor03;forcesc2strategy;forocoches;frankieonpcin1080p;freeman;freemason;friesland;frigiel;frogout;fuckfacebook;fullhdvideos4me;funkyblackcat;gaben;gabenn;gagatunfeed;gamebombru;gamefails;gamegrumps;gamehelper;gameloft;gamenewsofficial;gameplayrj;gamerspawn;games;gameshqmedia;gamespot;gamestarde;gametrailers;gametube;gamexplain;garenavietnam;garfield;gassymexican;gaston;geilkind;generikb;germanletsfail;getinmybelly;getinthebox;ghostrobo;giancarloparimango11;gimper;gimperr;github;giygas;gizzy14gazza;gnomechild;gocalibergaming;godsoncoc;gogomantv;gokoutv;goldglovetv;gommehd;gona89;gonzo;gonzossm;grammar nazi;grayhat;grima;gronkh;grumpy;gtamissions;gtaseriesvideos;guccinoheya;guilhermegamer;guilhermeoss;gurren lagann;h2odelirious;haatfilms;hagrid;halflife;halflife3;halo;handicapped;hap;hassanalhajry;hatty;hawaii;hawkeye;hdluh;hdstarcraft;heartrockerchannel;hebrew;heisenburg;helix;helldogmadness;hikakingames;hikeplays;hipsterwhale;hispachan;hitler;homestuck;honeycomb;hosokawa;hue;huskymudkipz;huskystarcraft;hydro;iballisticsquid;iceland;ie;igameplay1337;ignentertainment;ihascupquake;illuminati;illuminatiii;ilvostrocarodexter;imaqtpie;imgur;immortalhdfilms;imperial japan;imperialists;imperialjapan;imvuinc;insanegaz;insidegaming;insidersnetwork;instagram;instalok;inthelittlewood;ipodmail;iron man;isaac;isamuxpompa;isis;isreal;itchyfeetleech;itsjerryandharry;itsonbtv;iulitm;ivysaur;izuniy;jackfrags;jacksepticeye;jahovaswitniss;jahrein;jaidefinichon;james bond;jamesnintendonerd;jamonymow;java;jellyyt;jeromeasf;jew;jewnose;jibanyan;jimmies;jjayjoker;joeygraceffagames;johnsju;jontronshow;josemicod5;joueurdugrenier;juegagerman;jumpinthepack;jupiter;kalmar union;kame;kappa;karamba728;kenny;keralis;kiloomobile;kingdomoffrance;kingjoffrey;kinnpatuhikaru;kirby;kitty;kjragaming;klingon;knekrogamer;knights templar;knightstemplar;knowyourmeme;kootra;kripparrian;ksiolajidebt;ksiolajidebthd;kuplinovplay;kurdistan;kwebbelkop;kyle;kyokushin4;kyrsp33dy;ladle;laggerfeed;lazuritnyignom;ldshadowlady;le snake;lenny;letsplay;letsplayshik;letstaddl;level5ch;levelcapgaming;lgbt;liberland;libertyy;liechtenstien;lifesimmer;linux;lisbug;littlelizardgaming;llessur;loadingreadyrun;loki;lolchampseries;lonniedos;love;lpmitkev;luigi;luke4316;m3rkmus1c;macedonia;machinimarealm;machinimarespawn;magdalenamariamonika;mahalovideogames;malena010102;malta;mario;mario11168;markiplier;markipliergame;mars;maryland;masterball;mastercheif;mateiformiga;matroix;matthdgamer;matthewpatrick13;mattshea;maxmoefoegames;mcdonalds;meatboy;meatwad;meatwagon22;megamilk;messyourself;mickey;mike tyson;mike;miles923;minecraftblow;minecraftfinest;minecraftuniverse;miniladdd;miniminter;minnesotaburns;minnie;mkiceandfire;mlg;mm7games;mmohut;mmoxreview;mod3rnst3pny;moldova;morealia;mortalkombat;mr burns;mr.bean;mr.popo;mrchesterccj;mrdalekjd;mredxwx;mrlev12;mrlololoshka;mrvertez;mrwoofless;multirawen;munchingorange;n64;naga;namcobandaigameseu;nasa;natusvinceretv;nauru;nazi;nbgi;needforspeed;nepenthez;nextgentactics;nextgenwalkthroughs;ngtzombies;nick fury;nick;nickelodeon;niichts;nintendo;nintendocaprisun;nintendowiimovies;nipple;nislt;nobodyepic;node;noobfromua;northbrabant;northernlion;norunine;nosmoking;notch;nsa;obama;obey;officialclashofclans;officialnerdcubed;oficialmundocanibal;olafvids;omfgcata;onlyvgvids;opticnade;osu;ouch;outsidexbox;p3rvduxa;packattack04082;palau;paluten;pandaexpress;paulsoaresjr;pauseunpause;pazudoraya;pdkfilms;peanutbuttergamer;pedo;pedobear;peinto1008;peka;penguin;penguinz0;pepe;pepsi;perpetuumworld;pewdiepie;pi;pietsmittie;pig;piggy;pika;pimpnite;pinkfloyd;pinkstylist;pirate;piratebay;pizza;pizzaa;plagasrz;plantsvszombies;playclashofclans;playcomedyclub;playscopetrailers;playstation;playstation3gaminghd;pockysweets;poketlwewt;pooh;poop;popularmmos;potato;prestonplayz;protatomonster;prowrestlingshibatar;pt;pur3pamaj;quantum leap;question;rageface;rajmangaminghd;retard smile;rewind;rewinside;rezendeevil;reziplaygamesagain;rfm767;riffer333;robbaz;rockalone2k;rockbandprincess1;rockstar;rockstargames;rojov13;rolfharris;roomba;roosterteeth;roviomobile;rspproductionz;rss;rusgametactics;ryukyu;s.h.e.i.l.d;sah4rshow;samoa;sara12031986;sarazarlp;satan;saudi arabia;scream;screwattack;seal;seananners;serbia;serbiangamesbl;sethbling;sharingan;shell;shine;shofu;shrek;shufflelp;shurikworld;shuuya007;sinistar;siphano13;sir;skillgaming;skinspotlights;skkf;skull;skydoesminecraft;skylandersgame;skype;skyrim;slack;slovakia;slovenia;slowpoke;smash;smikesmike05;smoothmcgroove;smoove7182954;smoshgames;snafu;snapchat;snoop dogg;soccer;soliare;solomid;somalia;sp4zie;space ace;space;sparklesproduction;sparkofphoenix;spawn;speedyw03;speirstheamazinghd;spiderman;spongegar;spore;spqr;spy;squareenix;squirtle;ssohpkc;sssniperwolf;ssundee;stalinjr;stampylonghead;star wars rebel;starbucks;starchild;starrynight;staxxcraft;stitch;stupid;summit1g;sunface;superevgexa;superman;superskarmory;swiftor;swimmingbird941;syria;t3ddygames;tackle4826;taco;taltigolt;tasselfoot;tazercraft;tbnrfrags;tctngaming;teamfortress;teamgarrymoviethai;teammojang;terrorgamesbionic;tetraninja;tgn;the8bittheater;thealvaro845;theatlanticcraft;thebajancanadian;thebraindit;thecraftanos;thedanirep;thedeluxe4;thediamondminecart;theescapistmagazine;thefantasio974;thegaminglemon;thegrefg;thejoves;thejwittz;themasterov;themaxmurai;themediacows;themrsark;thepolishpenguinpl;theradbrad;therelaxingend;therpgminx;therunawayguys;thesims;theskylanderboy;thesw1tcher;thesyndicateproject;theuselessmouth;thewillyrex;thnxcya;thor;tintin;tmartn;tmartn2;tobygames;tomo0723sw;tonga;topbestappsforkids;totalhalibut;touchgameplay;transformer;transformers;trickshotting;triforce;trollarchoffice;trollface;trumpsc;tubbymcfatfuck;turkey;tv;tvddotty;tvongamenet;twitch;twitter;twosyncfifa;typicalgamer;uberdanger;uberhaxornova;ubisoft;uguu;ukip;ungespielt;uppercase;uruguay;utorrent;vanossgaming;vatican;venomextreme;venturiantale;videogamedunkey;videogames;vietnam;vikkstar123;vikkstar123hd;vintagebeef;virus;vladnext3;voat;voyager;vsauce3;w1ldc4t43;wakawaka;wales;walrus;wazowski;wewlad;white  light;whiteboy7thst;whoyourenemy;wiiriketopray;willyrex;windows;wingsofredemption;wit my woes;woodysgamertag;worldgamingshows;worldoftanks;worldofwarcraft;wowcrendor;wqlfy;wroetoshaw;wwf;wykop;xalexby11;xbox;xboxviewtv;xbulletgtx;xcalizorz;xcvii007r1;xjawz;xmandzio;xpertthief;xrpmx13;xsk;yamimash;yarikpawgames;ycm;yfrosta;yinyang;ylilauta;ylilautaa;yoba;yobaa;yobaaa;yogscast2;yogscastlalna;yogscastsips;yogscastsjin;yoteslaya;youalwayswin;yourheroes;yourmom;youtube;zackscottgames;zangado;zazinombies;zeecrazyatheist;zeon;zerkaahd;zerkaaplays;zexyzek;zimbabwe;zng;zoella;zoidberg;zombey;zoomingames";var version=202;if(version!=localStorage.getItem("version")){localStorage.setItem("version",version);var benchmarks=["250mass","500mass","1000mass","2500mass","5000mass"];var removed=[];for(var i=0;i<benchmarks.length;i++){var a="best_"+ benchmarks[i];if(localStorage.getItem(a)!=null){if(isNaN(localStorage.getItem(a))){localStorage.removeItem(a);removed.push(a);}else if(i!=0&&removed.length>0){for(var j=0;j<removed.length;j++){localStorage.setItem(removed[j],localStorage.getItem(a));}
removed=[];};}}};function preset(s,v){if(null==localStorage.getItem(s))localStorage.setItem(s,v)}
preset("chatEnabled","true");preset("settingShow_chart","true");preset("showt","true");preset("nick","");var skinblacklist="squirt,sephirot,kuntt,cake,girl,*,0*,8*,censorship,chotalarga";var skinfilter=/porn|pussy|tit|naked|pussy|^sex|boob|\*\*|^myh/;var showsh=false;var showt=localStorage.getItem("showt")=="true";var chatEnabled=localStorage.getItem("chatEnabled")=="true";window.extToggled=false;window.server={ip:"",i:"",location:""};var ldown=false;var pload=0;var ptime=false;var showfps=false;var showpio=false;var showbio=false;if(showt===null){localStorage.setItem("showt","true");showt=true;}
setInterval(function(){if(showsh)DrawStats(false);if(showt&&in_game)count();if(ptime)time(Date.now());},1000);var gamejs="",modBlocking=true;var tester=document.getElementsByTagName("script");var i=0;var W='';var b='';var sk='';var c3eg2='';var in_game=false;var pandb='';var bgmusic='';var tracks=['BotB 17936 Isolation Tank.mp3','BotB 17934 bubblybubblebubblingbubbles.mp3','BotB 17935 bloblobloblboblbolboblboblbobolbloblob.mp3','BotB 17937 Woofytunes.mp3','BotB 17938 slowgrow.mp3','BotB 18549 a blob\'s life.mp3','BotB 18550 war of the orbs.mp3','BotB 18551 blob tower.mp3'];var ssfxlist=['spawn','gameover'];var ssfxs=[];for(var i=0;i<ssfxlist.length;i++){var newsfx=new Audio("//skins.agariomods.com/botb/sfx/"+ ssfxlist[i]+".mp3");newsfx.loop=false;ssfxs.push(newsfx);}
var mysfxlist=['cntdwn','end'];for(var i=0;i<ssfxlist.length;i++){var newsfx=new Audio("//skins.agariomods.com/mevin1/"+ mysfxlist[i]+".mp3");newsfx.loop=false;ssfxs.push(newsfx);}
function sfx_play(id){if(document.getElementById("sfx").value==0)return;var event=ssfxs[id];event.volume=document.getElementById("sfx").value;event.play();}
var pellets=[];var pellet=0;for(var i=0;i<50;i++){newsfx=new Audio('data:audio/mp3;base64,SUQzAwAAAAAAIlRSQ0sAAAACAAAAOFRJVDIAAAAMAAAAQXVkaW8gVHJhY2v/8yTEAAcAQph5SRAAAMuAAnOc5z/mwmFwBgDA2TvWD4PyjpQ5vlHcH+9/fK8aWTj/8yTEBwlocqgBmtAA0HYmGCTgm37MUrTnLZjRhwJ0wNQRg5EY8gXae+xVQhZevYv/8yTEBAewXpghzwABX2fMStQ1DTRLaQUW0QkTU6o7CyvRX4gpvwQWTEFNRTMuOTn/8yTECAAAA0gAAAAALjOqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=');newsfx.loop=false;pellets.push(newsfx);}
function play_pellet(){if(document.getElementById("sfx").value==0)return;pellet++
if(pellet>49)pellet=0;pellets[pellet].volume=document.getElementById("sfx").value;pellets[pellet].play()}
var sfxlist=['split','eat','bounce','merge','virusfeed','virusshoot','virushit'];var sfxs=[];for(var i=0;i<sfxlist.length;i++){var newsfx=new Audio("//skins.agariomods.com/botb/sfx/"+ sfxlist[i]+".mp3");newsfx.loop=false;newsfx.onended=function(){$(this).remove();}
sfxs.push(newsfx);}
function sfx_event(id){if(document.getElementById("sfx").value==0)return;var event=jQuery.clone(sfxs[id]);event.volume=document.getElementById("sfx").value;event.load();event.play();}
var test=1;var passed=0;var failed=0;var chart_update_interval=10;var chart=null;var chart_data=[];var chart_counter=0;var chart_s='';var chart_m='';var chart_G='';var chart_Na='';var chart_k='';var sd='';var mainout=window.location.protocol+"//agar.io/main_out.js";httpGet(mainout,function(data){winvar=data.substr(10,1);gamejs=data.replace("socket open","socket open (agariomods.com mod in place)");gamejs=gamejs.replace(/\n/g,"");sd=gamejs.substr(gamejs.search(/\w.send/),1);offset=gamejs.search(".....src=\"skins");b=gamejs.substr(offset+2,1);v=gamejs.match(/(\w)\?"m/)[1];offset=gamejs.search(/\w+\.indexOf\(.\)\?/);sk=gamejs.substr(offset,2);offset=gamejs.search(".."+b+"..src");W=gamejs.substr(offset,1);mycells=gamejs.match(/1==(\w+)\.length&&\(/)[1];var c=/this\.(.)&&.\.strokeText/.exec(gamejs);pandb=c[1];var c=/(\w)\.strokeText\((.{1,14})\);/.exec(gamejs);c3eg2=c[2];bdot=c[1];var c=/\((.)\=..x,.\=..y,/.exec(gamejs);chart_s=c[1];var c=/\(.\=(.).x,.\=..y,/.exec(gamejs);chart_m=c[1];var c=/(.)\=Math.max\(.,..\(\)\);/.exec(gamejs);chart_G=c[1];var c=/.\=Math.max\(.,(..)\(\)\);/.exec(gamejs);chart_Na=c[1];var c=/(.)\[0\]\.name\&\&\(/.exec(gamejs);chart_k=c[1];agariomodsRuntimeInjection();});function httpGet(theUrl,callback){var xmlHttp=new XMLHttpRequest();xmlHttp.open("GET",theUrl,true);xmlHttp.send(null);xmlHttp.onreadystatechange=function(){if(xmlHttp.readyState==4&&xmlHttp.status==200){callback(xmlHttp.responseText);}};}
window.connect2=(window.connect?window.connect:function(){return});function agariomodsRuntimeInjection(){var script=document.createElement("script");script.src='//cdnjs.cloudflare.com/ajax/libs/canvasjs/1.4.1/canvas.min.js';document.head.appendChild(script);var tester=document.getElementsByTagName("head");var oldhtml=tester[0].innerHTML;oldhtml=oldhtml.replace('#helloContainer,.connecting-panel{','#helloContainer{left:-2px;top:-6px;width:682px;');oldhtml=oldhtml.replace('width:94px;','margin-right:10px;');oldhtml=oldhtml.replace('#locationKnown','#locationKnown{height:40px}#locationKnown');oldhtml=oldhtml.replace('#region{width:100%','.region{width:300px;float:left');oldhtml=oldhtml.replace('.btn-spectate{','.btn-spectate{width:110px;');oldhtml=oldhtml.replace('margin-left:5px;width:275px','width:357px');oldhtml=oldhtml.replace('-webkit-transform:translate(-50%,-50%);','');oldhtml=oldhtml.replace('-ms-transform:translate(-50%,-50%);','');oldhtml=oldhtml.replace('transform:translate(-50%,-50%);','');oldhtml=oldhtml.replace('top:50%;left:50%;','margin:10px;');oldhtml=oldhtml.replace('width:100%;height:100%;','');oldhtml=oldhtml.replace('#FFFFFF;m','rgba(255,255,255,0.9);opacity:0.93;m');oldhtml=oldhtml.replace('581px','600px;left:100px');oldhtml=oldhtml.replace('#statsContinue{','#statsContinue{margin-bottom:30px;')
oldhtml=oldhtml.replace('.agario-panel{','#atstats table{margin-bottom:15px}#atMass table{width:100%}#atstats td,#atstats th{padding:0 15px;border-bottom: 1px #bbb solid;}#atstats td:not(*:first-child),#atstats th:not(*:first-child){border-left:1px;text-align:center}#egstats>.nav-tabs{transform:rotate(90deg);position:absolute;right:-74px;top:73px;z-index:1000;}#helloContainer #egstats{top:155px;left:468px;background-color:rgba(255,255,255,0.93);}#overlays{background-color: rgba(0,0,0,0)}#overlays>#egstats .nav-tabs{display:none}#overlays>#egstats{left:20vw;background-color:rgba(255,255,255,0.6);}#egstats{position:fixed;width:566px;border-radius:15px;padding:5px 15px;padding-right:50px;overflow:hidden;}#helloContainer[data-gamemode=":party"][data-logged-in="1"] #egstats{left:696px;}#respawn{position:absolute;left:25px;right:25px;width:300px;bottom:285px;}.agario-profile-name-container{pointer-events: none;}#stats>canvas{margin-bottom:20px}#stats hr:first-of-type{margin-bottom:8px !important}#stats hr:last-of-type{margin-bottom:8px !important}br[clear="both"]{display:none}#mainPanel hr{margin:0 -15px 20px -15px}hr{height:12px;border:0;box-shadow:inset 0 12px 12px -12px rgba(0, 0, 0, 0.5)}.tosBox{display:none}.agario-panel.agario-side-panel.agario-profile-panel{overflow:hidden}.ribbon{margin-bottom:-100px;transform:rotate(26deg);background-color:#a00;overflow:hidden;white-space:nowrap;box-shadow:0 0 10px #888;right:-55px;top:-11px;position:relative;}.ribbon a {border:1px solid #faa;color:#fff;display:block;font:bold 11px "Helvetica Neue", Helvetica, Arial, sans-serif;margin:1px 0;padding:2px;text-align:center;text-decoration:none;text-shadow:0 0 5px #444;}.agario-promo{display:none !important;}body>#chart-container{pointer-events:none}.connecting-panel{margin:0 0 !important;position:absolute;top:5px;right:5px;z-index:2000}.ui{pointer-events:none}br+div:not([style]){height:35px;}#helloContainer>.agario-panel{float:left}#helloContainer>.side-container{float:right}.agario-panel{transform:none !important;');tester[0].innerHTML=oldhtml;var script=document.createElement("script");script.id="agariomods";agariomodsRuntimePatches();if(document.getElementById("agariomods")){alert("You are currently running multiple instances of Agariomods simultaneously!\nCheck that you dont have Tampermonkey Script and the Chrome Extension running at the same time if you're on Chrome;\nYou will see visual glicthes until YOU fix this.");}
script.innerHTML=gamejs;var oc=document.getElementById("canvas");var nc=document.createElement("canvas");nc.id="canvas";nc.width=oc.width;nc.height=oc.height;oc.parentNode.replaceChild(nc,oc);jQuery("#region").removeAttr("id").attr("onchange","setRegion($('.region').val());").addClass("region").children().each(function(){this.innerHTML=this.innerHTML.replace(/ \(.*$/,"");});;document.head.appendChild(script);agariomodsRuntimeHacks();bgmusic=new Audio()
bgmusic.src="//skins.agariomods.com/botb/"+ tracks[Math.floor(Math.random()*tracks.length)];bgmusic.load();bgmusic.loop=false;bgmusic.onended=function(){var track=tracks[Math.floor(Math.random()*tracks.length)];bgmusic.src="//skins.agariomods.com/botb/"+ track;bgmusic.play();}
window.onbeforeunload=function(){if(!window.extToggled)return'Are you sure you want to exit?';};$("#canvas").on('mousedown',function(event){event.preventDefault();});var tempa=document.getElementById("connecting").style;tempa.zIndex="99";tempa.display="block";document.getElementById("a300x250").style.backgroundImage="none";}
window.countdown=function(a,b){if(b!="Game starting in")return;if(0<a&&a<=10){window.countdown.a=false;sfx_play(2);}else if(a==0&&window.countdown.a==false){window.countdown.a=true;ResetStats(Date.now());sfx_play(3);}};window.countdown.a=false;window.log=function(stuff){console.log(stuff);}
function agariomodsRuntimePatches(){gamejs_patch("console.log(b);","","remove console spam");gamejs_patch("(17),",'(17),document.activeElement.type!="text",',"");gamejs_patch("(18),",'(18),document.activeElement.type!="text",',"");gamejs_patch(/\?\((\w+\[0\])\.name/,"?($1&&$1.name","Error prevention for some error not caused by mod");gamejs_patch(/(.{21}{\w\(\{\w:\w,\w:(\w),\w:\w\})/,'jQuery("#xpg").text(Math.max($2-Math.min(JSON.parse(window.localStorage.loginCache3).xp,JSON.parse(window.localStorage.loginCache3).xpNeeded,jQuery(".progress-bar-text").text().split("/")[0]),0)).parent().show();$1',"xp earned");gamejs_patch('3333FF"]','3333FF","#33FFFF","#FF33FF","#FFFF33"]',"Add more team colors, CMY");gamejs_patch("(a,b){i","(a,b){if(!b){jQuery('#helloContainer').attr('data-party-state')!=0&&cancelParty(true);jQuery('#gps').fadeOut();window.nav(0,0,!1);var b=''};i","Kill parties and gps on private server connect");gamejs_patch("())};",'()||jQuery("#gps").fadeOut()&&window.nav&&window.nav(0,0,!1))};',"Toggle gps on gamemode change.");gamejs_patch('console.warn("Skipping draw"),','(console.warn("Skipping draw"),OnDrop()),','log dropped frames');gamejs_patch(/\((\w+\?)/,'(OnDeath(),$1','add ondeath hook');gamejs=gamejs.split("#region").join(".region");gamejs_patch('attr("data-party-state","1")','attr("data-party-state","1");jQuery("#gps").fadeIn()',"party hook");gamejs_patch('attr("data-party-state","5");','attr("data-party-state","5");jQuery("#gps").fadeIn();',"party hook");gamejs_patch('attr("data-party-state","0");','attr("data-party-state","0");jQuery("#gps").fadeOut();(window.nav&&window.nav(0,0,!1));',"party hook");gamejs_patch('attr("data-party-state","0"),','attr("data-party-state","0")&&jQuery("#gps").fadeOut()&&window.nav&&window.nav(0,0,!1),',"party hook");gamejs_patch("location.hash)",'location.hash)&&jQuery("#gps").fadeIn()',"Gps on on start from party.");gamejs_patch('console.log("socket close");','onwsclose();console.log("socket close");',"Simulate player death on unexpected socket close");gamejs_patch('.onclose=null;','.onclose=onwsclose;',"Simulate player death on intentional socket close.")
gamejs_patch(/\w>\w\/1\.1\?.*-50%\)"\);/,'',"fixing menu on resize");gamejs_patch("cancelParty=function(){",'cancelParty=function(a){if(jQuery("#stats").is(":visible")){return};',"Leave party when connecting to private server - add funct var");gamejs_patch(/""\);(\w+\(\))/,'"");jQuery("#gps").fadeOut();window.nav&&window.nav(0,0,!1);!a&&$1',"Leave party when connecting to private server - handle");gamejs_patch("else for","stillOnLeaderboard(ilead)}else for","adding function call for leaderboard checking")
gamejs_patch(/(for\(\w\.f)/,"{var ilead=!1;$1","Preset veriable to check if on leaderboard",!0)
gamejs_patch('split(";"),',"split(\";\"),ourskins='"+ourskins+"'.split(';'),blklst='"+skinblacklist+"'.split(','),blklst2="+skinfilter+",","blklst");gamejs_patch(';reddit;',';reddit;'+ourskins+';',"add our skinlist to the original game skinlist.");gamejs_patch(b+'=this.name.toLowerCase();',b+'=this.name.substr(0,2)=="i/"?this.name:this.name.toLowerCase();'+"if ((("+b+".substring(0, 2) == \"i/\"&&("+b+".length==7||"+b+".length==9))||"+b+".substring(0, 1) == \"*\"||("+b+".substring(0, 1) == \"+\"&&"+b+".length>6))&&!custom&&"+sk+".indexOf("+b+")==-1) {"+sk+".push("+b+")} ;"+b+'='+b+'.replace(/^\\[(.*)\\].*$/,"$1");var agariomods="";if(pcs&&'+mycells+'.indexOf(this)!=-1){agariomods=pcsrc}else if(('+b+'.length >0)&&(ourskins.indexOf('+b+')>-1)){agariomods="//skins.agariomods.com/i/"+'+b+'+".png";}else if('+b+'.substring(0,1)=="*"){if(!custom){var emn = '+b+'.substring(1);if(~blklst.indexOf(emn)||blklst2.test(emn)&&blklst.push(emn)){agariomods="";if(window.lastBlock!=emn){console.log("Skin \\""+emn+"\\" is Blacklisted");window.lastBlock=emn}} else {agariomods="//connect.agariomods.com/img_"+'+b+'.substring(1)+".png";}}}else if('+b+'.substring(0,2)=="i/"&&('+b+'.length==7||'+b+'.length==9)){if(!custom){agariomods="//i.imgur.com/"+'+b+'.substring(2)+".jpg";}}else if('+b+'.substring(0,1)=="+"&&'+b+'.length>6){agariomods="http://kelvin.tk/yt/icon.php?"+'+b+'.substring(1).toLowerCase();}else if('+sk+'.indexOf('+b+')>-1){agariomods="//agar.io/skins/"+'+b+'.toLowerCase()+".png";}',"add check for which skin mode we are in. be it no skin, default skin, custom skin, or an agariomods skin.");gamejs_patch(/(\w+)\.toDataURL\("image\/png"\)/,"(function(){try{var p=$1.toDataURL('image/png');return p}catch(e){return ''}})()","FU FAVICON!.");gamejs_patch('=1E4,','=1E4,'+'zz=!1,yq=!1,xx=!1,xz=!1,ts=!1,custom=!1,opv=!1,pcs=!1,pcsrc=""'+',',"adding variables");gamejs_patch(W+'['+b+'].src="skins/"+'+b+'+".png"','(pcs||agariomods.substr(0,1)=="+"&&('+W+'['+b+'].crossOrigin="Anonymous")),'+W+'['+b+'].src=agariomods',"check for agariomods img src variable");gamejs_patch("this."+pandb+"&&"+bdot+".strokeText("+c3eg2+");"+bdot+".fillText("+c3eg2+")","if (String("+c3eg2.substr(0,1)+").substring(0, 2) != \"i/\" || custom) {this."+pandb+"&&"+bdot+".strokeText("+c3eg2+");"+bdot+".fillText("+c3eg2+")}","add imgur skins check for hiding username when using imgur id aka c3eg2");gamejs_patch(".googletag.pubads&&",".googletag.pubads&&window.googletag.pubads.clear&&","Fix for users with Ghostery");gamejs_patch("this.color);",'this.color);if(this.name=="\\u0081"&&this.'+v+'&&h.length&&(h[0].x-this.x)*(h[0].x-this.x)+(h[0].y-this.y)*(h[0].y-this.y)<=this.size*100){var x=this.color.replace("#","0x");a.fillStyle="rgba("+[x>>16,x>>8&0xFF,x&0xFF,.4].join()+")"};if(this.name==Array(17).join("\\u0081")&&this.'+v+'){a.strokeStyle="#BBBBBB";a.fillStyle="#BBBBBB"};',"");gamejs=addKeyboardHook(gamejs);gamejs=addSkinHook(gamejs);gamejs=addChartHooks(gamejs);gamejs=addOnCellEatenHook(gamejs);gamejs=addTeamMassHook(gamejs);gamejs=addTeamSkinsHook(gamejs);gamejs=addCanvasBGHook(gamejs);gamejs=addVirusColorHook(gamejs);gamejs=addFunctions(gamejs);gamejs=addOnShowOverlayHook(gamejs);gamejs=addOnHideOverlayHook(gamejs);gamejs=addLeaderboardHook(gamejs);gamejs=addConnectHook(gamejs);gamejs=addRecieveHook(gamejs);gamejs=addPCSHook(gamejs);gamejs=addOnSendHook(gamejs);gamejs=addOnDrawHook(gamejs);gamejs_patch(/=1\*\w\.innerHeight/g,'=opv&&'+winvar+'.innerHeight/'+winvar+'.innerWidth>=0.5625?('+winvar+'.innerWidth*0.5625):('+winvar+'.innerHeight)',"set height to 16:9");gamejs_patch(/=1\*\w\.innerWidth/g,'=opv&&'+winvar+'.innerHeight/'+winvar+'.innerWidth<=0.5625?('+winvar+'.innerHeight/0.5625):('+winvar+'.innerWidth)',"set width to 16:9");console.log("Testing complete, "+passed+" units passed and "+failed+" units failed.");if(failed){if(window.debug)console.log(new Error("UNIT FAILED"));else window.onmoderror()};}
function gamejs_patch(search,replace,purpose){testCondition(typeof search=="string"?~gamejs.indexOf(search):search.test(gamejs),test++,purpose,search);gamejs=gamejs.replace(search,replace);}
function testCondition(condition,id,comment,search){if(condition){window.debug&&console.log("test: #"+id+" PASSED - "+ comment);passed++;}else{console.error("test: #"+id+" FAILED - "+ comment+"\n Could not find: "+ search.toString());failed++;}}
function agariomodsRuntimeHacks(){jQuery('div.agario-panel:has(#locationUnknown)').css({width:'450px'});jQuery('div#settings div:has(#locationKnown)').css({float:'none'});var bg=document.getElementById("canvas");bg.style.backgroundSize='cover';bg.style.backgroundRepeat='no-repeat';bg.style.backgroundAttachment="fixed";document.body.style.backgroundColor="grey";var nodeDiv=document.createElement("div");var nodeDiv2=document.createElement("div");document.getElementById("nick").placeholder="agariomods.com";nodeDiv.id="includedContent";nodeDiv.style.width="calc(100% + 10px)"
nodeDiv.style.backgroundColor="#000000";nodeDiv.style.zIndex=999;nodeDiv.style.position="relative";nodeDiv2.style.padding="8px";nodeDiv.style.borderRadius="5px";nodeDiv.style.color="#dddddd";nodeDiv2.style.color="#dddddd";nodeDiv.style.margin="3px -5px 8px";nodeDiv2.style.maxHeight="200px";nodeDiv2.style.width="calc(100% - 5px)";nodeDiv.style.overflow="none";nodeDiv2.style.overflow="auto";nodeDiv2.innerHTML+='1.9.9.05: <a href="http://agariomods.com/warinspace.html" target="_blank" style="font-size:26px"><span>NEW GAME!!</span><br><p>Click here to try out a new game that was inspired by agar.io.</p><br><small>(Not made by the agariomods team)</small></a><br><br><font style="font-weight:bold;font-size:20px">New game mode on on Atlanta 4</font><br>1.9.9.04: connect with agar.io/?ip:port or agar.io/#ip:port (<b>PRIVATE SERVERS ONLY</b>)<br><small>1.9.9.03: GPS for parties mode! Tell your party your coordinates(shown beside score), and have them put it in the gps!<br><small>1.9.9.02: Ghostery Fix!<br><small>1.9.9.01: \'+YoutubeUserName\' Skins</small></small></small><br> \
<b>Use custom skins with *ACCOUNTNAME</b><br><a href="http://connect.agariomods.com/" target="_blank"><font color="pink">Register now with agariomods connect to get custom skins!</font></a><br>\
Go catch up with the <a target="_blank" href="http://agariomods.com/documentation.html">Documentation</a><br>\
        <a href="http://battleofthebits.bandcamp.com/" target="_blank" style="background:url(\'http://i.imgur.com/0nYntZy.png\');height:100px;display:block;"></a>\
        </div>';nodeDiv.appendChild(nodeDiv2);jQuery(".form-group:first").replaceWith('<br>');var selector=jQuery('.region');var playBtn=jQuery('#playBtn');var nodeInput=document.createElement("span");var nodeSpan=document.createElement("span");var nodeBr=document.createElement("br");var nodeLinks=document.createElement("div");nodeLinks.innerHTML="<ul style='position:relative;left:-25px;width:450px;background-color:#428bca;text-align:center;font:16px bold,sans-serif;list-style-type:none;margin:6px 0 3px;padding:0;overflow:hidden;'><li style='float:left;'><a class='link' style='width:70px;' href='http://skins.agariomods.com' target='_blank'>SKINS</a><li style='float:left;'><a style='width:70px;' class='link' href='http://agariomods.com/chat.html' target='_blank'>CHAT</a><li style='float:left;'><a style='width:100px;' class='link' href='http://agariomods.com' target='_blank'>WEBSITE</a><li style='float:left;'><a style='width:110px;' class='link' href='http://agariomods.com/documentation.html' target='_blank'>FEATURES</a></li><li style='float:left;'><a style='width:100px;' class='link' style='border-right:0 !important' href onclick=\"alert('---HOTKEYS---\\nHold Z - Show Stats In-Game\\nConnect To Private Server - Alt+C\\nToggle Chat - C\\nInput Chat - Enter OR \\'/\\'\\nToggle Benchmarker - T\\nClear Benchmarks - Alt+T\\nTime On Page - Alt+1\\nFPS Counter - Alt+2\\nPackets In/Out Per Second - Alt+3\\nBytes In/Out Per Second - Alt+4\\nAttempt Lag Recovery - Alt+R'+(navigator.userAgent.match('Firefox')?'\\nTrue Fullscreen for Firefox - Ctrl+F\\nShow Menu - Delete':''));return false;\" target='_blank'>HOTKEYS</a></li></ul>";nodeLinks.style.marginLeft='10px';nodeSpan.className="glyphicon glyphicon-refresh btn btn-info";nodeSpan.style.fontSize="1.5em";nodeSpan.style.cssFloat="left";nodeSpan.style.paddingTop="2px";nodeSpan.style.width="15%";nodeSpan.style.height="33px";nodeInput.id="iphack"
nodeInput.style.width="85%";nodeInput.style.cssFloat="left";nodeInput.style.cssClear="right";nodeInput.style.padding="5px;";nodeInput.style.margin="5px;";nodeInput.style.border="2px solid green";jQuery('#locationUnknown').prepend(nodeLinks);jQuery('#locationUnknown').append(nodeDiv);$("#includedContent>div").scrollTop($("#includedContent>div")[0].scrollHeight);$('.link').css({'display':'block','border-right':'1px solid #0077CC','padding':'4px 0','background-color':'#428bca','color':'white'});$('.link').hover(function(){$(this).css('background-color','#529bda');$(this).removeClass("active");},function(){$(this).css('background-color','#428bca');$(this).removeClass("active");});jQuery('.btn-play,.btn-play-guest').click(function(){var a=document.getElementById('nick').value;var b=localStorage.getItem("nick");if(a.substr(0,1)=='*'&&a.length>1&&b!=a){a=a.substr(1);jQuery.ajax({url:"http://connect.agariomods.com/json/nodechatcheck.php?u="+getCookie("apikey"),dataType:'json',success:function(data){if(data.username==a&&data.has_img==true){localStorage.setItem("nick","*"+a);}else localStorage.setItem("nick","");},error:function(){localStorage.setItem("nick","");}});}else localStorage.setItem("nick","");});jQuery('.form-group:first').removeAttr("class");jQuery('.btn-play-guest').addClass("btn-danger").removeClass("btn-success").css({'margin-left':'0','width':"208px"});jQuery('.btn-login').css("margin-right","4px");jQuery('.btn-login').css("width","140px");jQuery('#settings div:has(#locationKnown)').css("width","100%");var oldc=jQuery("#settings div:has(.btn-spectate)");jQuery(".btn-spectate").insertAfter($(".region"));oldc.remove();jQuery("#statsContinue").html("Menu");jQuery("#statsContinue").clone().addClass("btn-info").removeClass("btn-primary").prop("id","respawn").attr("onclick","closeStats();setNick(document.getElementById('nick').value);return false;").removeProp("date-itr").html("Respawn").insertAfter($("#statsContinue"));}
var chart_update_interval=10;var chart=null;var chart_data=[];var chart_counter=0;var stat_canvas=null;var stats=null;var my_cells=null;var my_color="#ff8888";var pie=null;var stats_chart;var display_chart=LS_getValue('display_chart','true')==='true';var display_stats=LS_getValue('display_stats','false')==='true';var g_stat_spacing=0;var g_display_width=220;var g_layout_width=g_display_width;function addPCSHook(script){var match=script.match(/-1!=\w+\.indexOf\((\w+)\)\?/);var split=script.split(match[0]);script=split[0]+'(pcs&&-1!='+mycells+'.indexOf(this))||'+ match[0]+ split[1];match=script.match(/\(\w+\.hasOwnProperty\(\w+\)/);split=script.split(match[0]);script=split[0]+'('+match[0]+split[1];match=script.match(/\|\|\((\w+)\[(\w+)/);split=script.split(match[0]);var ta=match[1];var tb=match[2];return split[0]+'&&!(pcs&&pcsrc!='+ta+'['+tb+']))'+ match[0]+ split[1];}
function addKeyboardHook(script){var match=script.match(/onkeydown=function\(\w\){/);var split=script.split(match[0]);return split[0]+ match[0]+' if(isVisible()) return;'+ split[1];}
function addSkinHook(script){var match=script.match(/(\w+)=null\)\):\w+=null;/);var split=script.split(match[0]);return split[0]+ match[1]+'=null)):'+ match[1]+'=null;if(custom&&('+b+'.substring(0,2).match(/^(i\\/|\\*.)$/))){'+ match[1]+'=null;}'+ split[1];}
function addChartHooks(script){match=script.match(/max\((\w+),(\w+)\(/);var high=match[1];var current=match[2];match=script.match(/1==(\w+)\.length&&\(/);var split=script.split(match[0]);script=split[0]+'1=='+mycells+'.length&&(OnGameStart('+mycells+',Date.now()),'+ split[1];split=script.split(script.match(/\w+\("score"\)\+": "\+~~\(\w+\/100\)/)[0]);match=split[1].match(/-(\d+)\)\);/);var subSplit=split[1].split(match[0]);split[1]=subSplit[0]+'-'+match[1]+'),('+mycells+'&&'+mycells+'[0]&&OnUpdateMass('+current+'())));'+ subSplit[1];return split[0]+'"Score: "+~~('+current+'()/100)+"  High: "+~~('+high+'/100)+(((["1","5"].indexOf(jQuery("#helloContainer").attr("data-party-state"))!=-1)&&'+mycells+'[0])?("  |  X:"+Math.round(~~('+mycells+'[0].x)*.01)+" Y:"+Math.round(~~('+mycells+'[0].y)*.01)):(""))'+ split[1];}
function addTeamSkinsHook(script){var match=script.match(/":teams"!=(\w)/);var split=script.split(match[0]);return split[0]+'(window.teams==false||ts)'+split[1];}
function addTeamMassHook(script){match=script.match(/this\.id&&(\w+)/);var split=script.split(match[0]);var c=match[1];var d=script.match(/\(!this\.\w\|\|this\.\w\)/);match=script.match(/(\w)=-1!=(\w)\.indexOf\(this\);/);var a=match[1];var z=match[2];script=split[0]+"this.id&&("+c+"||(yq&&"+z+"[0]&&window.teams))"+split[1];split=script.split('}0');return split[0]+"}if(-1!="+z+".indexOf(this)){"+a+"="+c+"}else if(yq&&"+z+"[0]&&window.teams&&this.size>20&&"+d+"&&this.color.replace(/[^f#]{2}/g,'--')=="+z+"[0].color.replace(/[^f#]{2}/g,'--')){"+a+"=true};0"+split[1];}
function addFunctions(script){match=script.match(/(\(\w+=)!0(,\w+=(\w+),\w+=(\w+)\))/);var m0=match[1];var m1=match[2];var m2=match[3];var m3=match[4];match=script.match(/(\w+)\("#connecting"\)\.show\(\),(\w+)\(\)/);var one=match[1];var two=match[2];var match=script.match(/((\w)\.setAcid)/);var split=script.split(match[0]);return split[0]+match[2]+".nav=function(a,b,c){"+m2+"=Math.round(a*100);"+m3+"=Math.round(b*100);"+m0+"c"+m1+"};"+match[2]+'.setPCS=function(a){pcs=a;if(a){var url=localStorage.getItem("pcsrc");if(url==null){url=""};var promp=prompt("Input Skin URL\\nRemember ONLY YOU will see this skin.",url);if(null==promp){jQuery("#pcson").attr("checked",false);check(document.getElementById("bgimg"));pcs=!a;return;}localStorage.setItem("pcsrc",promp);pcsrc=promp;}};'+match[2]+'.setR=function(){'+one+'("#connecting").show(),'+two+'()};'+match[2]+'.setMVR=function(a){opv=a;'+winvar+'.onresize()};'+match[2]+'.setTskins=function(a){ts=a};'+match[2]+'.setCustom=function(a){custom=a;};'+match[2]+'.setVColors=function(a){zz=a};'+match[2]+'.setTeamMass=function(a){yq=a};'+match[2]+'.setBG=function(a){xx=a;if(a){var url=localStorage.getItem("bgurl");if(url==null){url=""};var promp=prompt("Image URL",url);if(null==promp){jQuery("#bgimg").attr("checked",false);check(document.getElementById("bgimg"));xx=!a;return;}localStorage.setItem("bgurl",promp);jQuery("#acid").attr("checked",false);check(document.getElementById("acid"));document.getElementById("canvas").style.backgroundImage=\'url("\'+promp+\'")\';xz=confirm("Show Grid Lines?");}};Object.defineProperty('+match[2]+',"teams",{get:function(){return '+script.match(/case 50:(\w+)/)[1]+'!=null}});'+match[1]+split[1]}
function addCanvasBGHook(script){var match=script.match(/(\w)\.clearRect\(0,0,(\w),(\w)\)/);var split=script.split(match[0]);script=split[0]+match[1]+'.clearRect(0,0,'+match[2]+','+match[3]+');xx&&!xz?'+match[1]+'.clearRect(0,0,'+match[2]+','+match[3]+'):'+split[1].substr(1);var match2=script.match(/BFF";/);var split=script.split(match2[0]);return split[0]+'BFF";xx&&xz?'+match[1]+'.clearRect(0,0,'+match[2]+','+match[3]+'):'+split[1];}
function addVirusColorHook(script){var match=script.match(/(\?\(\w\.fillStyle=")/);var split=script.split(match[0]);return split[0]+'||zz&&this.'+v+match[1]+split[1]}
function addLeaderboardHook(script){var match=script.match(/4;(\w+)=\[\]/)[1];var split=script.split("for(a.font");script=split[0]+'if('+match+'[2]&&'+match+'[2].id==1&&10>='+match+'[2].name&&'+match+'[2].name>=0){countdown('+match+'[2].name,'+match+'[1].name)};for(a.font'+split[1];match=script.match(/(fillStyle="#FFAAAA")(.+)(\w+)(\+1\+"\. ")/);split=script.split(match[0]);return split[0]+match[1]+',OnLeaderboard('+match[3]+'+1),ilead=true'+match[2]+match[3]+match[4]+split[1]}
function addOnCellEatenHook(script){var match=script.match(/(\w+)&&(\w+)&&\((\w+)\.(\w+)/);var split=script.split(match[0]);return split[0]+ match[1]+'&&'+ match[2]+'&&(OnCellEaten('+match[1]+','+match[2]+'),'+ match[3]+'.'+ match[4]+ split[1];}
function addOnShowOverlayHook(script){var match=script.match(/:e\("#overlays"\)\.show\(\)/);var split=script.split(match[0]);return split[0]+ match[0]+',OnShowOverlay('+')'+ split[1];}
function addConnectHook(script){var match=script.match(/console\.log\("Connecting to "\+a\);/);var split=script.split(match[0]);return split[0]+('try{connect2("...")}catch(a){};')+ match[0]+'if(a.indexOf(window.server.ip)==-1){window.server = {ip:"",i:"",location:""};closeChat();}'+ split[1];}
function addRecieveHook(script){var match=script.match(/\w+\(new DataView\(..data\)\)/);var split=script.split(match[0]);return split[0]+ match[0]+';Recieve(a.data.byteLength);'+ split[1];}
function addOnSendHook(script){var match=script.match(/\w+\.send\(\w+\.buffer\)/);var split=script.split(match[0]);return split[0]+ match[0]+';OnSend(a.byteLength);'+ split[1];}
function addOnHideOverlayHook(script){var match=script.match(/\w+\("#overlays"\)\.hide\(\)/);var split=script.split(match[0]);return split[0]+ match[0]+';OnHideOverlay()'+ split[1];}
function addOnDrawHook(script){var match=script.match(/\w+\.width&&(\w+)\.drawImage\(\w+,\w+-\w+\.width-10,10\);/);var split=script.split(match[0]);return split[0]+ match[0]+'OnDraw('+ match[1]+');'+ split[1];}
var __STORAGE_PREFIX="mikeyk730__";function LS_getValue(aKey,aDefault){var val=localStorage.getItem(__STORAGE_PREFIX+ aKey);if(null===val&&'undefined'!=typeof aDefault)return aDefault;return val;}
function LS_setValue(aKey,aVal){localStorage.setItem(__STORAGE_PREFIX+ aKey,aVal);}
function GetRgba(hex_color,opacity)
{var patt=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/;var matches=patt.exec(hex_color);return"rgba("+parseInt(matches[1],16)+","+parseInt(matches[2],16)+","+parseInt(matches[3],16)+","+opacity+")";}
function secondsToHms(d)
{d=Number(d);var h=Math.floor(d/3600);var m=Math.floor(d%3600/60);var s=Math.floor(d%3600%60);return(h>=1?h+':':'')+(h>=1&&m<10?'0':'')+ m+":"+(s<10?'0':'')+ s;}
function tst(a){a?$("#chart-container-agariomods").css({"bottom":"5px","right":"5px","top":"","left":""}):$("#chart-container-agariomods").css({"bottom":"","right":"","top":"3px","left":"5px"});a?$("div#benchmarker").css({"bottom":"25px"}):$("div#benchmarker").css({"bottom":"10px"});}
jQuery(document).ready(function()
{jQuery('body').append('<div id="chart-container" class="ui" style="display:none; position:absolute; height:176px; width:300px; left:10px; bottom:44px"></div>\
			   <div id="chart-container-agariomods" class="ui" style="position:absolute; font-size:15px; right:5px; bottom:5px; /* -webkit-filter: invert(100%); filter: invert(100%); */">&nbsp;agariomods.com - modding <b>without</b> cheating</div>\
			   <div id="debug" class="ui" style="position:absolute; top:5px; left:10px;">\
			   <div id="time-agariomods" style="color: white; display: none; background-color: rgba(0,0,0,.5); padding:0 4px;"><b>Page Time: </b><span>0</span></div>\
			   <div id="fps" class="fps-agariomods" style="color: white; display: none; background-color: rgba(0,0,0,.5); padding:0 4px;"><b>Frame Rate: </b><span>0</span>/s</div>\
			   <div id="dfps" class="fps-agariomods" style="color: white; display: none; background-color: rgba(0,0,0,.5); padding:0 4px;"><b>Dropped Frames: </b><span>0</span>/s</div>\
			   <div id="pi" class="pio-agariomods" style="color: white; display: none;  background-color: rgba(0,0,0,.5); padding:0 4px;"><b>Packets In: </b><span>0</span>/s</div>\
			   <div id="po" class="pio-agariomods" style="color: white; display: none;  background-color: rgba(0,0,0,.5); padding:0 4px;"><b>Packets Out: </b><span>0</span>/s</div>\
			   <div id="bi" class="bio-agariomods" style="color: white; display: none;  background-color: rgba(0,0,0,.5); padding:0 4px;"><b>Download: </b><span>0</span> Bps</div>\
			   <div id="bo" class="bio-agariomods" style="color: white; display: none;  background-color: rgba(0,0,0,.5); padding:0 4px;"><b>Upload: </b><span>0</span> Bps</div>\
			   </div>\
			   ');jQuery('#instructions').remove();jQuery('.glyphicon-cog').addClass("glyphicon-refresh")
jQuery('.glyphicon-cog').removeClass("glyphicon-cog");jQuery('.btn-settings').attr('onclick','setR()');jQuery('.btn-login').attr('type','button');jQuery('.btn-settings').attr('type','button');jQuery('.btn-settings').css({'width':'15%','height':'35px'});jQuery('.btn-settings').removeClass("btn-settings");jQuery('#settings').show();var checkbox_div=jQuery('#settings input[type=checkbox]').closest('div');checkbox_div.append('<label><input type="checkbox" id="acid" onchange="setAcid($(this).is(\':checked\'));if($(this).is(\':checked\')){$(\'#bgimg\').attr(\'checked\',false);check(document.getElementById(\'bgimg\'));}">Acid</label>');checkbox_div.append('<label><input type="checkbox" onchange="if(this.checked){jQuery(\'#chart-container\').show()}else{jQuery(\'#chart-container\').hide()}">Show chart</label>');checkbox_div.append('<label><input type="checkbox" onchange="setVColors($(this).is(\':checked\'));">Colorless Viruses</label>');checkbox_div.append('<label><input id="custom" type="checkbox" onchange="setCustom($(this).is(\':checked\'));">No Custom Skins</label>');checkbox_div.append('\
		<label nosave><input id="pcson" type="checkbox" onchange="setPCS($(this).is(\':checked\'));">Set Client Skin</label>\
		<label nosave><input id="setChat" type="checkbox" onchange="toggleChat()">Ogar Chat Enabled</label>\
		<label nosave><input id="bgimg" type="checkbox" onchange="setBG($(this).is(\':checked\'));">Set Background</label>\
		<label nosave><input id="toggleTimer" type="checkbox" onchange="setTimer()">Show Benchmarker</label>\
	');checkbox_div.append('<label><input type="checkbox" onchange="setTeamMass($(this).is(\':checked\'));">Show Teamed Mass</label>');checkbox_div.append('<label><input id="tskins" type="checkbox" onchange="setTskins($(this).is(\':checked\'));">Team Skins</label>');checkbox_div.append('<label><input type="checkbox" onchange="setMVR($(this).is(\':checked\'));">Maximize View</label>');checkbox_div.append('<div id="sliders" style="white-space:nowrap;display:inline;"><label>SFX<input id="sfx" type="range" value="0" step=".1" min="0" max="1"></label><label>BGM<input type="range" id="bgm" value="0" step=".1" min="0" max="1" oninput="volBGM(this.value);"></label></div>');jQuery('#helloContainer').append('<div id="egstats" style="display:none;"><ul id="stattab" class="nav nav-tabs"><li class="active" data-toggle="tab"><a href="#">Last Game</a></li><li data-toggle="tab" class=""><a href="#">All Time</a></li></ul><div id="lgstats"><div id="statArea" style="vertical-align:top; width:250px; display:inline-block;"></div><div id="pieArea" style="vertical-align: top; float:right;width:248px; height:186px; display:inline-block; vertical-align:top;"> </div><div id="gainArea" style="width:250px;  vertical-align:top;float:left"></div><div id="lossArea" style="width:250px; float:right;"></div><div id="chartArea" style="float:left;width:500px; display:inline-block; vertical-align:top"></div></div><div id="atstats" style="display:none"><div id="atTable" style="vertical-align:top; width:100%; display:inline-block;"></div><br><div id="atList" style="width:250px;  vertical-align:top;float:left"></div><div id="atMass" style="width:250px; float:right;"></div></div></div>');jQuery('#egstats').hide(0);jQuery("#stattab>li:first-child>a").on("click",function(){jQuery("#lgstats").show();jQuery("#atstats").hide()});jQuery("#stattab>li:last-child>a").on("click",function(){jQuery("#atstats").show();jQuery("#lgstats").hide()});var q=$(".agario-profile-name-container");q[0].outerHTML='<div class="ribbon"><a href onclick="confirm(\'You sure you want to log out?\')&&logout(); return false;">Logout</a></div>'+q[0].outerHTML;document.getElementById("options").style.fontSize="14px";document.getElementById("setChat").checked=chatEnabled;document.getElementById("toggleTimer").checked=showt;});window.setTimer=function(){showt=!showt;localStorage.setItem("showt",showt);document.getElementById("toggleTimer").checked=showt;document.getElementById("benchmarker").style.display=showt?"block":"none";}
window.toggleChat=function(){chatEnabled=!chatEnabled;document.getElementById("setChat").checked=chatEnabled;localStorage.setItem("chatEnabled",chatEnabled);if(server.ip.substr(-11)==".iomods.com")chatEnabled?openChat():closeChat()};function ResetChart()
{chart=null;chart_data.length=0;chart_counter=0;jQuery('#chart-container').empty();}
function UpdateChartData(mass)
{chart_counter++;if(chart_counter%chart_update_interval>0)
return false;chart_data.push({x:chart_counter,y:mass/100});return true;}
function CreateChart(e,color,interactive,a,b)
{var c={interactivityEnabled:interactive,title:null,axisX:{valueFormatString:" ",lineThickness:0,tickLength:0},axisY:{lineThickness:0,tickLength:0,gridThickness:2,gridColor:"white",labelFontColor:"white"},backgroundColor:"rgba(0,0,0,0.2)",data:[{type:"area",color:color,dataPoints:chart_data}]};if(a){c.width=a;c.height=b;};return new CanvasJS.Chart(e,c);}
function UpdateChart(mass,color)
{var diff=window.innerHeight-document.getElementById("canvas").height;if(diff!=0)jQuery("div:not(#chartArea)>.canvasjs-chart-container>.canvasjs-chart-canvas").css('bottom',-176+diff);my_color=color;if(chart===null)
chart=CreateChart("chart-container",color,false);if(UpdateChartData(mass)&&document.getElementsByClassName(""))
chart.render();jQuery('.canvasjs-chart-credit').hide();};function ResetStats(start)
{stats={pellets:{num:0,mass:0},w:{num:0,mass:0},cells:{num:0,mass:0},viruses:{num:0,mass:0},birthday:start,time_of_death:null,high_score:0,leader_time:0,top_slot:Number.POSITIVE_INFINITY,gains:{},losses:{},};}
function OnGainMass(me,other)
{var mass=other.size*other.size;if(other.color=='#ce6363')other.name="Mother Cell";if(other[v]){stats.viruses.num++;if(!window.teams)stats.viruses.mass+=mass;sfx_event(6);}
else if(Math.floor(mass)<=400&&!other.name){stats.pellets.num++;stats.pellets.mass+=mass;play_pellet();}
else if(!other.name&&mass<=1444&&(mass>=1369||(other.x==other.ox&&other.y==other.oy))){if(other.color!=me.color){stats.w.num++;stats.w.mass+=mass;}
sfx_event(1);}
else{var key=other.name+':'+ other.color;stats.cells.num++;stats.cells.mass+=mass;if(stats.gains[key]==undefined)
stats.gains[key]={num:0,mass:0};stats.gains[key].num++;stats.gains[key].mass+=mass;sfx_event(1);}}
function OnLoseMass(me,other)
{var mass=me.size*me.size;if(other.color=='#ce6363')other.name="Mother Cell";var key=other.name+':'+ other.color;if(stats.losses[key]==undefined)
stats.losses[key]={num:0,mass:0};;stats.losses[key].num++;stats.losses[key].mass+=mass;sfx_event(1);}
function DrawPie(pellet,w,cells,viruses)
{var total=pellet+ w+ cells+ viruses;pie=new CanvasJS.Chart("pieArea",{title:null,animationEnabled:false,legend:{verticalAlign:"center",horizontalAlign:"left",fontSize:12,fontFamily:"Helvetica"},theme:"theme2",height:186,width:248,data:[{type:"pie",startAngle:-20,showInLegend:true,toolTipContent:"{legendText} {y}%",dataPoints:[{y:100*pellet/total,legendText:"pellets"},{y:100*cells/total,legendText:"cells"},{y:100*w/total,legendText:"w"},{y:100*viruses/total,legendText:"viruses"},]}]});pie.render();}
function GetTopN(n,p)
{var r=[];var a=Object.keys(stats[p]).sort(function(a,b){return-(stats[p][a].mass- stats[p][b].mass)});for(var i=0;i<n&&i<a.length;++i){var key=a[i];var mass=stats[p][key].mass;var name=key.slice(0,key.length-8);if(!name)name="An unnamed cell";var color=key.slice(key.length-7);r.push({name:name,color:color,mass:Math.floor(mass/100)});}
return r;}
function AppendTopN(n,p,list)
{var a=GetTopN(n,p);for(var i=0;i<a.length;++i){var text='<bdi>'+a[i].name+'</bdi> ('+(p=='gains'?'+':'-')+ a[i].mass+' mass)';list.append('<li style="font-size: 12px; "><div style="width: 10px; height: 10px; border-radius: 50%; margin-right:5px; background-color: '+ a[i].color+'; display: inline-block;"></div>'+ text+'</li>');}
return a.length>0;}
function DrawStats(game_over)
{if(!game_over!=in_game)return;jQuery('#statArea').empty();jQuery('#pieArea').empty();jQuery('#gainArea').empty();jQuery('#lossArea').empty();jQuery('#chartArea').empty();jQuery('#egstats').show();var time=stats.time_of_death==null?Date.now():stats.time_of_death;var seconds=time- stats.birthday;count(seconds);var list=jQuery('<ul>');list.append('<li style="font-size: 12px; ">Game time: '+ mToHms(seconds)+'</li>');list.append('<li style="font-size: 12px; ">High score: '+~~(stats.high_score/100)+'</li>');if(stats.top_slot==Number.POSITIVE_INFINITY){list.append('<li style="font-size: 12px; ">You didn\'t make the leaderboard.</li>');}
else{list.append('<li style="font-size: 12px; ">Top Position: '+ stats.top_slot+'</li>');list.append('<li style="font-size: 12px; ">Leaderboard Time: '+ mToHms(stats.leader_time)+'</li>');}
list.append('<li style="font-size: 12px; display:none;">XP Earned: <span id="xpg"></span></li>');list.append('<li style="font-size: 12px; padding-top: 15px">'+ stats.pellets.num+" pellets eaten ("+~~(stats.pellets.mass/100)+' mass)</li>');list.append('<li style="font-size: 12px; ">'+ stats.cells.num+" cells eaten ("+~~(stats.cells.mass/100)+' mass)</li>');list.append('<li style="font-size: 12px; ">'+ stats.w.num+" masses eaten ("+~~(stats.w.mass/100)+' mass)</li>');list.append('<li style="font-size: 12px; ">'+ stats.viruses.num+" viruses eaten ("+~~(stats.viruses.mass/100)+' mass)</li>');var totalMass=(~~(stats.pellets.mass/100)+~~(stats.cells.mass/100)+~~(stats.w.mass/100)+~~(stats.viruses.mass/100));list.append('<li style="font-size: 12px; ">Total mass eaten: '+ totalMass+'</li>');jQuery('#statArea').append('<b>Game Summary</b>');jQuery('#statArea').append(list);if(stats.time_of_death!=null){jQuery('#atTable').empty();jQuery('#atList').empty();jQuery('#atMass').empty();localStorage.started||localStorage.setItem("started",Date.now());var attab=jQuery('<table>');var atlist=jQuery('<ul>');var atmass=jQuery('<table>');attab.append('<tr><th>Stat</th><th>Cumulative</th><th>Best</th></tr>');attab.append('<tr><td>Game Time</td><td>'+ mToHms(alltime("alltime",seconds))+'</td><td>'+mToHms(best("time",seconds))+'</td><td></td></tr>');attab.append('<tr><td>Score</td><td>'+ alltime("allscore",~~(stats.high_score/100))+'</td><td>'+ best("highscore",~~(stats.high_score/100))+'</td><td></td></tr>');attab.append('<tr><td>Leaderboard Time</td><td>'+ mToHms(alltime("leaderboard",stats.leader_time))+'</td><td>'+ mToHms(best("leaderboard",stats.leader_time))+'</td><td></td></tr>');attab.append('<tr><td>Players Eaten</td><td>'+ alltime("cells",stats.cells.num)+'</td><td>'+ best("celleat",stats.cells.num)+'</td><td></td></tr>');atlist.append('<li>Games played: '+alltime("played",1)+'</li>')
atmass.append('<tr><th>Type</th><th>Number</th><th>Mass</th></tr>');atmass.append('<tr><td>Pellets</td><td>'+ alltime("pellets",stats.pellets.num)+"</td><td>"+ best("pellets",~~(stats.pellets.mass/100))+'</td></tr>');atmass.append('<tr><td>Cells</td><td>'+ alltime("cells")+"</td><td>"+ best("cells",~~(stats.cells.mass/100))+'</td></tr>');atmass.append('<tr><td>W\'s</td><td>'+ alltime("ws",stats.w.num)+"</td><td>"+ best("ws",~~(stats.w.mass/100))+'</td></tr>');atmass.append('<tr><td>Viruses</td><td>'+ alltime("viruses",stats.viruses.num)+"</td><td>"+ best("viruses",~~(stats.viruses.mass/100))+'</td></tr>');jQuery('#atTable').append('<big><b>Summary (Experimental)</b></big>');jQuery('#atTable').append(attab);jQuery('#atList').append(atlist);jQuery('#atMass').append('<b>Mass</b>');jQuery('#atMass').append(atmass);}
DrawPie(stats.pellets.mass,stats.w.mass,stats.cells.mass,stats.viruses.mass);jQuery('#gainArea').append('<b>Top Gains</b>');list=jQuery('<ol>');if(AppendTopN(5,'gains',list))
jQuery('#gainArea').append(list);else
jQuery('#gainArea').append('<ul><li style="font-size: 12px; ">You have not eaten anybody</li></ul>');jQuery('#lossArea').append('<b>Top Losses</b>');list=jQuery('<ol>');if(AppendTopN(5,'losses',list))
jQuery('#lossArea').append(list);else
jQuery('#lossArea').append('<ul><li style="font-size: 12px; ">Nobody has eaten you</li></ul>');if(jQuery('#chart-container').is(':visible')==false&&in_game||!in_game){jQuery('#chartArea').width(500).height(150);stat_chart=CreateChart('chartArea',my_color,true,500,150);stat_chart.render();}
else{jQuery('#chartArea').width(500).height(0);}
jQuery('.canvasjs-chart-credit').hide();}
var styles={heading:{font:"20px Ubuntu",spacing:41,alpha:1},subheading:{font:"18px Ubuntu",spacing:31,alpha:1},normal:{font:"12px Ubuntu",spacing:21,alpha:0.6}}
function AppendText(text,context,style)
{context.globalAlpha=styles[style].alpha;context.font=styles[style].font;g_stat_spacing+=styles[style].spacing;var width=context.measureText(text).width;g_layout_width=Math.max(g_layout_width,width);context.fillText(text,g_layout_width/2- width/2,g_stat_spacing);}
function RenderStats(reset)
{if(!stats)return;if(reset)g_layout_width=g_display_width;g_stat_spacing=0;var gains=GetTopN(3,'gains');var losses=GetTopN(3,'losses');var height=30+ styles['heading'].spacing+ styles['subheading'].spacing*2+ styles['normal'].spacing*(4+ gains.length+ losses.length);stat_canvas=document.createElement("canvas");var scale=Math.min(g_display_width,.3*window.innerWidth)/ g_layout_width;
stat_canvas.width=g_layout_width*scale;stat_canvas.height=height*scale;var context=stat_canvas.getContext("2d");context.scale(scale,scale);context.globalAlpha=.4;context.fillStyle="#000000";context.fillRect(0,0,g_layout_width,height);context.fillStyle="#FFFFFF";AppendText("Stats",context,'heading');var text=stats.pellets.num+" pellets eaten ("+~~(stats.pellets.mass/100)+")";AppendText(text,context,'normal');text=stats.w.num+" mass eaten ("+~~(stats.w.mass/100)+")";AppendText(text,context,'normal');text=stats.cells.num+" cells eaten ("+~~(stats.cells.mass/100)+")";AppendText(text,context,'normal');text=stats.viruses.num+" viruses eaten ("+~~(stats.viruses.mass/100)+")";AppendText(text,context,'normal');AppendText("Top Gains",context,'subheading');for(var j=0;j<gains.length;++j){text=(j+1)+". "+ gains[j].name+" ("+ gains[j].mass+")";context.fillStyle=gains[j].color;AppendText(text,context,'normal');}
context.fillStyle="#FFFFFF";AppendText("Top Losses",context,'subheading');for(var j=0;j<losses.length;++j){text=(j+1)+". "+ losses[j].name+" ("+ losses[j].mass+")";context.fillStyle=losses[j].color;AppendText(text,context,'normal');}}
jQuery(window).resize(function(){in_game&&RenderStats(false);});window.OnGameStart=function(cells,start)
{jQuery("#lgstats").show();jQuery("#statTab>li:first-child").attr("class","active");jQuery("#atstats").hide();jQuery("#statTab>li:last-child").attr("class","");onwsclose(false);initbench(false);in_game=true;my_cells=cells;ResetChart();ResetStats(start);RenderStats(true);DrawStats(false);if(kd==true){showsh=false;document.getElementById("overlays").style.display="none";document.getElementById("overlays").style.pointerEvents="auto";jQuery("#egstats").appendTo($("#helloContainer"));$("#helloContainer").hide();kd=false;}
StartBGM();sfx_play(0);if(localStorage.getItem("played")===null){localStorage.setItem("played",0);}}
window.StartBGM=function()
{if(document.getElementById("bgm").value==0)return;if(bgmusic.src=="")bgmusic.src="//skins.agariomods.com/botb/"+ tracks[Math.floor(Math.random()*tracks.length)];bgmusic.volume=document.getElementById("bgm").value;bgmusic.play();}
window.StopBGM=function()
{if(document.getElementById("bgm").value==0)return;bgmusic.pause()
bgmusic.src="//skins.agariomods.com/botb/"+ tracks[Math.floor(Math.random()*tracks.length)];bgmusic.load()}
window.volBGM=function(vol)
{bgmusic.volume=document.getElementById("bgm").value;}
window.onwsclose=function(a){in_game&&OnDeath(false);window.nav(0,0,false);if(a!==false&&document.getElementById("overlays").style.display=="none")$(document).trigger(jQuery.Event('keydown',{keyCode:'27',which:'27'}));}
window.OnDeath=function(){sfx_play(1);StopBGM();stats.time_of_death=Date.now();showsh=false;tst(true);document.getElementById("benchmarker").style.bottom="25px";in_game=false;DrawStats(true);if(kd==true){document.getElementById("overlays").style.display="block";document.getElementById("overlays").style.pointerEvents="auto";jQuery("#egstats").appendTo($("#helloContainer"));$("#helloContainer").show();document.getElementById("helloContainer").style.display="block";kd=false;}}
window.OnShowOverlay=function(game_in_progress)
{canvas.onmousedown(0,0);tst(true);document.getElementById("benchmarker").style.bottom="25px";DrawStats(false);if(kd==true){document.getElementById("overlays").style.display="block";document.getElementById("overlays").style.pointerEvents="auto";jQuery("#egstats").appendTo($("#helloContainer"));$("#helloContainer").show();kd=false;}
if(in_game){showsh=true;}
else
{showsh=false;}}
var fired=false;window.OnHideOverlay=function()
{if(fired==true){fired=false;return;}else{fired=true;}
if(showsh==true)showsh=false;tst(showfps+showpio+showbio+ptime>0);}
window.OnUpdateMass=function(mass)
{stats.high_score=Math.max(stats.high_score,mass);UpdateChart(mass,GetRgba(my_cells[0].color,0.4));benchcheck(mass);}
window.OnCellEaten=function(predator,prey)
{if(!my_cells)return;if(my_cells.indexOf(predator)!=-1){OnGainMass(predator,prey);RenderStats(false);}
if(my_cells.indexOf(prey)!=-1){OnLoseMass(prey,predator);RenderStats(false);if(my_cells.length==1&&in_game&&document.getElementById("overlays").style.display!="none"){OnDeath()}}}
window.OnLeaderboard=function(position)
{stats.top_slot=Math.min(stats.top_slot,position);}
window.stillOnLeaderboard=function(a)
{if(a!=window.stillOnLeaderboard.leading){window.stillOnLeaderboard.leading=a;if(a)window.stillOnLeaderboard.time=Date.now();return;}else if(!a)return;stats.leader_time+=(Date.now()-window.stillOnLeaderboard.time);window.stillOnLeaderboard.time=Date.now();}
window.stillOnLeaderboard.leading=false;var clearfps=setTimeout(function(){},1000);window.OnDraw=function(context)
{if(showfps)document.getElementById("fps").children[1].innerHTML=rate('FPS');display_stats&&stat_canvas&&context.drawImage(stat_canvas,10,10);clearTimeout(clearfps);clearfps=setTimeout(function(){document.getElementById("fps").children[1].innerHTML="0"},1000);}
var cleardfps=setTimeout(function(){},1000);window.OnDrop=function()
{if(showfps)document.getElementById("dfps").children[1].innerHTML=rate('DFPS');clearTimeout(cleardfps);cleardfps=setTimeout(function(){document.getElementById("dfps").children[1].innerHTML="0"},1000);}
window.Recieve=function(a)
{if(showbio)document.getElementById("bi").children[1].innerHTML=Math.floor(multirate('BI',a));if(showpio)document.getElementById("pi").children[1].innerHTML=rate('PI');}
window.OnSend=function(a)
{if(showbio)document.getElementById("bo").children[1].innerHTML=Math.floor(multirate('BO',a))
if(showpio)document.getElementById("po").children[1].innerHTML=rate('PO');}
function time(a)
{document.getElementById("time-agariomods").children[1].innerHTML=mToHms(a-pload);}
function rate(z){if(!rate[z]){rate[z]={};rate[z].lastLoop=(new Date()).getMilliseconds();rate[z].count=1;rate[z].packet=0;}
var currentLoop=(new Date()).getMilliseconds();if(rate[z].lastLoop>currentLoop){rate[z].packet=rate[z].count;rate[z].count=1;}else{rate[z].count+=1;}
rate[z].lastLoop=currentLoop;return rate[z].packet;};function multirate(z,v){if(!multirate[z]){multirate[z]={};multirate[z].lastLoop=(new Date()).getMilliseconds();multirate[z].count=v;multirate[z].packet=0;}
var currentLoop=(new Date()).getMilliseconds();if(multirate[z].lastLoop>currentLoop){multirate[z].packet=multirate[z].count;multirate[z].count=0;}else{multirate[z].count+=v;}
multirate[z].lastLoop=currentLoop;return multirate[z].packet;};window.onpageshow=function(){pload=Date.now();initbench(true);document.getElementById("bgimg").checked=false;$("div#options label:not([nosave])").change(function(){$("div#options input:checkbox").each(function(){localStorage.setItem("setting"+$(this).parent().text().replace(" ","_"),this.checked);});$("div#options input[type=range]").each(function(){localStorage.setItem("setting"+$(this).parent().text().replace(" ","_"),this.value);});});$("div#options label:not([nosave]) input").each(function(){check(this);});document.getElementById("nick").value=localStorage.getItem("nick");history.replaceState({},document.title,'/');document.getElementById("load").style.display='none';document.getElementById("load").remove();document.getElementById("loadercss").remove();document.getElementById("overlays").style.display='block';document.getElementsByClassName("coord")[0].onkeypress=function(e){var a=!1;if(e.keyCode==(44||13)){e.preventDefault();$(".coord")[1].focus()}else if((48>e.keyCode||e.keyCode>57)&&e.keyCode!=45){e.preventDefault();a=!0}
if(this.value.length>4){e.preventDefault();$(".coord")[1].focus()}};document.getElementsByClassName("coord")[1].onkeypress=function(e){if((48>e.keyCode||e.keyCode>57)&&e.keyCode!=45){e.preventDefault();a=!0}
if((48<e.keyCode&&e.keyCode<57)&&(this.value.length==5&&this.value.substr(0,1)=="-"||this.value.length==4)){var a=document.getElementsByClassName("coord");var b=String.fromCharCode(e.charCode!=null?e.charCode:e.keyCode);window.nav(Math.floor(a[0].value),Math.floor(a[1].value),true);$(".coord").blur();}};setTimeout(function(){$("#includedContent>div").animate({scrollTop:$("#includedContent>div").position().top},1500);},750);}
window.check=function(elem){var evt=document.createEvent("HTMLEvents");evt.initEvent("change",false,true);elem.dispatchEvent(evt);}
$(document).ready(function(){$("div#options label:not([nosave]) input:checkbox").each(function(){$(this).attr("checked",(localStorage.getItem("setting"+$(this).parent().text().replace(" ","_")))=="true");});$("div#options label:not([nosave]) input[type=range]").each(function(){$(this).attr("value",(localStorage.getItem("setting"+$(this).parent().text().replace(" ","_"))));});addsbui();});var kd=false;var click
$(document).keydown(function(e){if(e.keyCode==90&&!jQuery('#chatinput').is(':visible')){if(kd==false&&document.getElementById("overlays").style.display=='none'){kd=true;document.getElementById("overlays").style.display="block";document.getElementById("overlays").style.pointerEvents="none";jQuery("#egstats").appendTo($("#overlays"));$("#helloContainer").hide();showsh=true;DrawStats(false);}}
if(e.keyCode==84&&!e.altKey&&document.activeElement.type!="text"){setTimer()}
if(e.keyCode==84&&e.altKey){if(confirm("Are you sure you want to delete your saved data on agar.io?\nThis will delete your all of your 'Best' stats, saved settings, and your saved API Key, and also log you out of Facebook from Agar.io.")){localStorage.clear();document.cookie="apikey=";logout();extToggled=!0;window.location=window.location};}
if(e.keyCode==67&&!e.altKey&&document.activeElement.type!="text"){toggleChat()}
if(e.keyCode==67&&e.altKey){var a=localStorage.getItem("ip");var b=prompt("Ogar Connect - Connect to a Private Ogar Server\nEnter IP or URL",(a==null?"":a));if(b==null){return;}else if(b==""){alert("No IP/URL inputed")};b=b.split("ws://").join("").trim();if(b.indexOf("/")==-1&&b.search(/:\d/)!==-1&&b.search(/[a-zA-Z0-9]\.[a-zA-Z0-9]/)!==-1&&encodeURI(b)==b){b="ws://"+b}else{alert("Invalid IP/URL");return;};try{connect(b)}catch(e){alert("Illegal IP/URL");return;};localStorage.setItem("ip",b);}
if(e.altKey&&e.keyCode==49){ptime=!ptime;document.getElementById("time-agariomods").style.display=ptime?"block":"none";ptime?time(Date.now()):document.getElementById("time-agariomods").children[1].innerHTML="";tst(showfps+showpio+showbio+ptime>0);}
if(e.altKey&&e.keyCode==50){showfps=!showfps;$(".fps-agariomods").css("display",showfps?"block":"none");tst(showfps+showpio+showbio+ptime>0);}
if(e.altKey&&e.keyCode==51){showpio=!showpio;$(".pio-agariomods").css("display",showpio?"block":"none");tst(showfps+showpio+showbio+ptime>0);}
if(e.altKey&&e.keyCode==52){showbio=!showbio;$(".bio-agariomods").css("display",showbio?"block":"none");tst(showfps+showpio+showbio+ptime>0);}
if(e.altKey&&e.keyCode==81&&in_game){return;jQuery("#overlays").show()
OnDeath(false);Suicide();}
if(e.ctrlKey&&e.keyCode===70&&navigator.userAgent.match("Firefox")){e.preventDefault();if(document.mozFullScreenElement)
{document.mozCancelFullScreen();}
else
{document.getElementById("overlays").mozRequestFullScreen();}}
if(e.keyCode===46&&navigator.userAgent.match("Firefox")&&document.activeElement.type!="text"){$(document).trigger(jQuery.Event('keydown',{keyCode:'27',which:'27'}));}
if(e.keyCode==82&&e.altKey){if(ldown)return;ldown=true
console.log("pausing");var currentTime=new Date().getTime();while(currentTime+ 500>=new Date().getTime()){}}});$(document).keyup(function(e){if(e.keyCode==90){if(kd==true){kd=false;document.getElementById("overlays").style.display="none";document.getElementById("overlays").style.pointerEvents="auto";jQuery("#egstats").appendTo($("#helloContainer"));$("#helloContainer").show();showsh=false;}}
if(e.keyCode==82&&e.altKey){if(ldown)ldown=false;}});var m,benchmarker;var benchmarks=["250mass","500mass","1000mass","2500mass","5000mass"];var mass_benchmarks=[250,500,1000,2500,5000];var massPrev=0;$("body").append('<div id="benchmarker"></div>');function initbench(first){$("div#benchmarker").css({"right":"7px","bottom":"25px","backgroundColor":"rgba(0,0,0,0.4)","opacity":"1.0","color":"white","fontFamily":"Ubuntu,Arial,sans-serif","position":"fixed","padding":"10px","text-align":"center","pointer-events":"none","z-index":"1000"});if(first){showt?$("div#benchmarker").css({"display":"block"}):$("div#benchmarker").css({"display":"none"});}else{tst(showfps+showpio+showbio+ptime>0);}
var newHTML='<table>'+'<h3>Benchmarker</h3>'+'<span>Time Elapsed: --:--</span>'+'<tr><th>Benchmark</th><th>Time</th><th>Best</th></tr>'+'<tr id="250mass"><td>250 Mass</td><td class="time">-----</td><td class="best">-----</td></tr>'+'<tr id="500mass"><td>500 Mass</td><td class="time">-----</td><td class="best">-----</td></tr>'+'<tr id="1000mass"><td>1000 Mass</td><td class="time">-----</td><td class="best">-----</td></tr>'+'<tr id="2500mass"><td>2500 Mass</td><td class="time">-----</td><td class="best">-----</td></tr>'+'<tr id="5000mass"><td>5000 Mass</td><td class="time">-----</td><td class="best">-----</td></tr>'+'</table>';$("div#benchmarker").html(newHTML);for(var i=0;i<benchmarks.length;i++){if(localStorage.getItem("best_"+ benchmarks[i])){$("#"+ benchmarks[i]+" .best").html(mToMs(localStorage.getItem("best_"+ benchmarks[i])));}}
$("table").css({"margin":"8px","padding":"8px"});$("div#benchmarker h3").css("text-align","center");$("div#benchmarker span").css({"text-align":"center","display":"inline-block"});$("td,th").css({"padding":"5px","text-align":"left"});$("div#benchmarker h3").css({"margin-top":"4px"});}
function count(alt){$("div#benchmarker span").html("Time Elapsed: "+ mToMs(alt?alt:(Date.now()- stats.birthday)));}
function mToHms(millis){millis=Math.floor(millis*0.001);var hours=Math.floor(millis/3600);var minutes=Math.floor(millis%3600/60);var seconds=Math.floor(millis%60);return(hours?hours+':':'')+(minutes<10&&hours?'0':'')+ minutes+":"+(seconds<10?'0':'')+ seconds;}
function mToMs(millis){millis=Math.floor(millis*0.001);var minutes=Math.floor(millis/60);var seconds=Math.floor(millis%60);return minutes+":"+(seconds<10?'0':'')+ seconds;}
function logBenchmark(benchmark,time){if($("#"+ benchmark+" .time").html()=="-----"){flash("#"+benchmark+" .time");console.log("Benchmark set: "+ benchmark+" at "+ mToMs(time));$("#"+ benchmark+" .time").html(mToMs(time));if(localStorage.getItem('best_'+ benchmark)==null||(time<localStorage.getItem('best_'+ benchmark))){console.log("Best time set: "+ benchmark+" at "+ mToMs(time));$("#"+ benchmark+" .best").html(mToMs(time));$("#"+ benchmark+" .best").css({"color":"lime"});localStorage.setItem("best_"+ benchmark,time);}}}
function benchcheck(mass){mass=Math.floor(mass/100);for(var i=0;i<mass_benchmarks.length;i++){if((massPrev<mass_benchmarks[i])&&(mass>=mass_benchmarks[i])){logBenchmark(mass_benchmarks[i]+"mass",Date.now()- stats.birthday);}}}
var socketscript=document.createElement('script');socketscript.setAttribute("type","text/javascript");socketscript.setAttribute("src","https://cdn.socket.io/socket.io-1.3.5.js");(document.body||document.head||document.documentElement).appendChild(socketscript);var socket;jQuery(document).keydown(function(e){if(e.keyCode==13||e.keyCode==191){if(jQuery('#chatinput').is(':visible')&&e.keyCode!=191){sendMSG();}
else if(document.activeElement.type!="text"){e.preventDefault();tChat();jQuery('#chatinputfield').focus();}}});window.connectPrivate=function(location,i,gm){var ip=location.toLowerCase().replace(/ /g,"")+'.iomods.com';var port=(1500+parseInt(i));server.ip=ip;server.i=i;server.location=location;connect("ws://"+ ip+":"+ port);openChat();}
function openChat(){apikey=getCookie("apikey");if(chatEnabled){var i=server.i;var ip=server.ip;var location=server.location;socket=io.connect("http://"+ip+":"+(12040+parseInt(i)),{forceNew:true,reconnection:false});socket.on('disconnect',function(){});socket.on('connect',function(){socket.emit("auth",{key:apikey});});socket.on('init',function(){jQuery('#chat').fadeIn();jQuery('#chatlines').empty();addServer("<b>You are now connected to: "+ location+' #'+ i+"</b>");});socket.on('chat',function(data){addLine(data);});socket.on('info',function(data){addServer(data.msg);});}}
function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length,c.length);}
return"";}
window.closeChat=function(){jQuery('#chat').fadeOut();socket&&socket.disconnect();}
function addServer(msg){jQuery('#chatlines').append(' *** '+ msg+'<br>');jQuery("#chatlines").animate({scrollTop:$("#chatlines")[0].scrollHeight});}
function addLine(data){if(data.name=="")
data.name="Unnamed";var escapedname=$("<div>").text(data.name).html();var escapedmsg=$("<div>").text(data.text).html();jQuery('#chatlines').append('<b><a href="#">'+ escapedname+'</a>:</b> <span>'+escapedmsg+'</span><br>');jQuery("#chatlines").animate({scrollTop:$("#chatlines")[0].scrollHeight});}
window.sendMSG=function(){if($('#chatinputfield').val().trim()==""){tChat(!0);return}
var msg=jQuery('#chatinputfield').val();jQuery('#chatinputfield').val('');socket.emit('chat',{text:msg});tChat(!0);}
window.tChat=function(a){a?jQuery('#chatinput').fadeOut("fast"):jQuery('#chatinput').fadeIn("fast")};window.isVisible=function(){if(jQuery('#chatinput').is(':visible'))
return true;else
return false;}
function handleHash(){if(~window.location.href.indexOf("?")){var q=window.location.search;if(q.substr(0,4)=="?ip="){return;}
var query=q.substr(1);if(query.substr(0,8)=="fallback"){return true;}else if(document.readyState!=="complete"){return false;}
if(query.indexOf("/")==-1&&query.search(/:\d/)!==-1&&query.search(/[a-zA-Z0-9]\.[a-zA-Z0-9]/)!==-1&&encodeURI(query)==query){try{connect("ws://"+query);alert("Connecting to: "+query);return;}catch(e){alert("Illegal IP/URL");return;}}else{alert("Invalid IP/URL");return;};}else
if(window.location.hash=='#'||window.location.hash==''||window.location.hash.length==6)return;var api=decodeURIComponent(window.location.hash.substr(1)).trim();if(api.indexOf("/")==-1&&api.search(/:\d/)!==-1&&api.search(/[a-zA-Z0-9]\.[a-zA-Z0-9]/)!==-1&&encodeURI(api)==api){window.onload=function(){try{connect("ws://"+api);alert("Joined: "+api);}catch(e){alert("Illegal IP/URL");}};return;};history.replaceState({},document.title,'/');if(getCookie("apikey")==api){alert("You already have this account linked with Agariomods.");return;}
if(api.search(/^{agariomods.com:\d+:[a-f0-9]{8}:[a-zA-Z0-9=]+:[a-zA-Z0-9=]+}$/)==0){var userid=api.split(":")[1];jQuery.ajax({url:"http://connect.agariomods.com/json/nodechatcheck.php?u="+api,dataType:'json',success:function(data){if(getCookie("apikey")!==""){if(!confirm("You already have an account account linked with Agariomods!\nLinking this account will unlink the currently linked account.\nDo you want to continue?"))return;}
if(data.error!='0'){alert("A Server Error Occured! Error Code: "+(data.error===null?"-1":data.error));}
else if(data.user_id==userid){document.cookie="apikey="+api;alert("Welcome "+data.username+", you can now chat in our private servers, press C to bring up chat, and press Enter to start typing.\nThe page will now reload.");extToggled=true;window.location=window.location;}
else{alert("Error: Incorrect API Key");}},error:function(){alert("Error: Failed to establish connection to connect.agariomods.com");}});}else{alert("Error: Invalid API Key/Server Location")}}
function openServerbrowser(a){var b=window.openServerbrowser.loading;if(b)return;b=true;jQuery("#rsb").prop("disabled",true);a||jQuery('#serverBrowser').fadeIn();getServers();}
window.openServerbrowser=openServerbrowser;function closeServerbrowser(){jQuery('#serverBrowser').fadeOut();}
window.closeServerbrowser=closeServerbrowser;function getServers(){var locations=["London Beta","Silicon Valley Beta","Amsterdam","Atlanta Beta","Frankfurt","London","Quebec","Paris","Atlanta","Chicago","Dallas","Los Angeles","Miami","New Jersey","Seattle","Silicon Valley","Sydney","Sydney Beta","Tokyo"].sort();;var lut=["Amsterdam","Frankfurt","London","Quebec","Paris","Atlanta","Chicago","Dallas","Los Angeles","Miami","New Jersey","Seattle","Silicon Valley","Sydney","Tokyo"].sort();;jQuery('#serverlist').empty();var serverlist=Array();var snippet="";snippet='<div class="serverrow"><div href class="servername serveritem" style="display:table-cell"><b style="color: #222">'+ locations[0]+'</b></div><div class="serverrower"><div class="serverrow">';for(var x=l=0;l<lut.length&&x<locations.length;x++){if(locations[x].substring(0,lut[l+1].length)==lut[l+1]){snippet+='</div></div></div><div class="serverrow"><div href class="servername serveritem" style="display:table-cell"><b style="color: #222">'+ locations[x]+'</b></div><div class="serverrower"><div class="serverrow">';l++};for(var i=1;i<=2;i++){serverid=locations[x].toLowerCase().replace(/ /g,"")+ i;snippet+='<a title="'+locations[x]+' #'+i+'" href style="color: black" class="serveritem" id="'+ serverid+'" onclick="connectPrivate(\''+locations[x]+'\', \''+i+'\');closeServerbrowser();return false;">\
			<i><span id="player">fetching data...</span> <i class="glyphicon glyphicon-user" /><br id="br"><span id="game" style="font-style:normal;font-weight:bold"></span></i></a>';serverlist.push((locations[x].toLowerCase().replace(/ /g,"")+i));};}
$('#serverlist').append(snippet+="</div></div></div>");jQuery.ajax({url:"http://connect.agariomods.com/json/ogar.json",dataType:'json',timeout:10000,success:function(data){serverinfo(data.games);},error:function(data){directserverinfo(serverlist,0);}});}
function serverinfo(games){var errored=[];for(var name in games){if(games.hasOwnProperty(name)){for(var i=0;i<2;i++){var value=name.slice(0,-11)+(i+1);var data=games[name][i];if(!data.hasOwnProperty("error")&&!data.hasOwnProperty("current_players")){jQuery('#'+ value+' #player').css("display","none");jQuery('#'+ value+' .glyphicon-user').css("display","none");jQuery('#'+ value).css({'border':"1px inset #ccc",'border-right':"1px outset #ccc",'border-bottom':"1px outset #ccc","opacity":"0.75","pointerEvents":"none"});jQuery('#'+ value+' #br').css("display","none");jQuery('#'+ value+' #game').css({color:"#f00",display:"block",textShadow:"-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black"});jQuery('#'+ value+' #game').text("Connection Failed");}else if(data.error!=null){errored.push(value);}else{$('#'+ value+' #player').text(data.current_players+"/"+ data.max_players);var gm=data.gamemode;gm=hgm(gm,value);$('#'+ value+' #game').text(gm);}}}}
if(errored.length==0){window.openServerbrowser.loading=false;jQuery("#rsb").prop("disabled",false);}else{directserverinfo(errored,0)};}
function directserverinfo(list,index){if(index>=list.length){window.openServerbrowser.loading=false;jQuery("#rsb").prop("disabled",false);return;}
var value=[list[index].slice(0,-1),list[index].substr(-1)];statsurl='http://'+ value[0]+'.iomods.com:'+('808'+ value[1]);jQuery.ajax({url:statsurl,dataType:'json',timeout:5000,success:function(data){$('#'+ list[index]+' #player').text(data.current_players+"/"+ data.max_players);var gm=data.gamemode;gm=hgm(gm,list[index]);$('#'+ list[index]+' #game').text(gm);},error:function(data,err,ngut){jQuery('#'+ list[index]+' #player').css("display","none");jQuery('#'+ list[index]+' .glyphicon-user').css("display","none");jQuery('#'+ list[index]).css({'border':"1px inset #ccc",'border-right':"1px outset #ccc",'border-bottom':"1px outset #ccc","opacity":"0.75","pointerEvents":"none"});jQuery('#'+ list[index]+' #br').css("display","none");jQuery('#'+ list[index]+' #game').css({color:"#f00",display:"block",textShadow:" -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black"});var errc='';if(err=="error"){errc="Connection Failed"}else if(err=="timeout"){errc="Connection Timed Out"}else{"Error: "+err.charAt(0).toUpperCase()+err.substr(1)};jQuery('#'+ list[index]+' #game').text(errc);},complete:function(data){document.getElementById("serverBrowser").style.display=="none"||directserverinfo(list,index+1);}});}
function hgm(gm,value){if(gm=="Hardcore Free For All"){$('#'+ value).on("click",function(){if(localStorage.getItem("hcffa1")==null){alert("Welcome to Hardcore Free For All!\nThis gamemode is still in testing; differences from FFA are:\n1. Instead of gaining mass fom eating viruses, you'll lose twice the mass.\n2. W's don't have any mass, they only work on viruses.\n3. Most of all, you only gain 2/3 of the mass of cells you eat!\n(and you only need to be 10% bigger than a cell to eat it)\n\nThis gamemode was designed to make the game more challenging.");localStorage.setItem("hcffa1","");}})}else if(gm=="Anonymous Free For All"){$('#'+ value).on("click",function(){if(localStorage.getItem("affa2")==null){alert("Welcome to Anonymous Free For All!\nThis gamemode is just like FFA, except:\n1. There are no names! The leaderboard is just there so you can see if you're on it.\n2. Everyone's color changes every minute! This makes it much harder to identify players by color.\n3. W's don't have any mass, they only work on viruses.\n\nThis gamemode was designed specifically to discourage any organized teaming, if you dont like that kind of stuff.");localStorage.setItem("affa2","");}})}else if(gm=="Enhanced Teams"){$('#'+ value).on("click",function(){if(localStorage.getItem("eteams")==null){alert("Welcome to Enhanced Teams!\nThis gamemode is different from Teams in two ways\n1. Pressing Q will toggle allowing yourself to be eaten by teammates\n2. Small cells will not push as much against larger cells");localStorage.setItem("eteams","");}});}else if(gm=="Hide and Seek"){$('#'+ value).on("click",function(){if(localStorage.getItem("has")==null){alert("Welcome to Hide and Seek!\nWhen the game starts\nA random player is selected as the seeker\nThe other players will have a few seconds to hide\nThen the seeker is released\n\nSeekers are red, Hiders are blue\nWhen a Seeker touches a Hider, they become a Seeker\nWhen you are in a Virus, you can see inside it\nHold Q to sprint\n\nSeeker win when no hiders are left\nHiders win once time runs out");gm="Hide and Seek Beta";localStorage.setItem("has","");}});}
return gm.replace(" Free For All"," FFA").replace("[Arenas] ","");}
function addsbui(a){var st=document.createElement("style");st.innerHTML="#pieArea .canvasjs-chart-canvas{bottom:initial !important}#gps span{float:left;background-color:transparent;border:0;font:24px Ubuntu;font-weight:bold;color:#fff;outline:none;box-shadow:none;background-color:rgba(0,0,0,0)}#gps>span{margin-top:3px;font:20px Ubuntu;font-weight:bold}div#gps{position:absolute;top:0;left:50%;transform:translateX(-50%);padding:6px 10px;float:left;color:#fff;font-weight:700;background-color:rgba(0,0,0,0.3);white-space:nowrap}div#coords{padding:2px;float:left;color:#fff;white-space:nowrap;background-color:rgba(0,0,0,0.3)}input.coord{font:23px Ubuntu;float:left;width:70px;margin:0 2px;color:#fff;background:transparent;font-weight:normal;white-space:nowrap;outline:none}.serverrower{table-layout: fixed;display:table;height:40px;width:100%}.serverrow{display:table-row;height:40px;}.serveritem{vertical-align:middle;text-decoration:none;display:table-cell;width:40px;height:40px;border:1px solid #ccc;padding:4px;}.servername{width:100px}.serveritem:not(.servername):hover{text-decoration:none;background-color:#E9FCFF;}.overlay{line-height:1.2;margin:0;font-family:sans-serif;text-align:center;position:absolute;top:0;left:0;width:100%;height:100%;z-index:1000;background-color:rgba(0,0,0,0.2)}.popupbox{position:absolute;height:100%;width:60%;left:20%;background-color:rgba(255,255,255,0.95);box-shadow:0 0 20px #000}.popheader{position:absolute;top:0;width:100%;height:50px;background-color:rgba(200,200,200,0.5)}.browserfilter{position:absolute;padding:5px;top:50px;width:100%;height:60px;background-color:rgba(200,200,200,0.5)}.scrollable{position:absolute;width:100%;top:50px;bottom:50px;overflow:auto;overflow-x:hidden;}.popupbuttons{background-color:rgba(200,200,200,0.4);height:50px;position:absolute;bottom:0;width:100%}.popupbox td,.popupbox th{padding:5px}.popupbox tbody tr{border-top:#ccc solid 1px}#tooltip{display:inline;position:relative}#tooltip:hover:after{background:#333;background:rgba(0,0,0,.8);border-radius:5px;bottom:26px;color:#fff;content:attr(title);left:20%;padding:5px 15px;position:absolute;z-index:98;width:220px}#chat{z-index:2000;width:500px;position:absolute;right:15px;bottom:25px}#chatinput{bottom:0;position:absolute;opacity:.8}#chatlines a{color:#086A87}#chatlines{pointer-events:none;position:absolute;bottom:40px;width:500px;color:#333;word-wrap:break-word;box-shadow:0 0 10px #111;background-color:rgba(0,0,0,0.1);border-radius:5px;padding:5px;height:200px;overflow:auto}.listing>span{display:block;font-size:11px;font-weight:400;color:#999}.list{padding:0 0;list-style:none;display:block;font:12px/20px 'Lucida Grande',Verdana,sans-serif}.listing{border-bottom:1px solid #e8e8e8;display:block;padding:10px 12px;font-weight:700;color:#555;text-decoration:none;cursor:pointer;line-height:18px}li:last-child > .listing{border-radius:0 0 3px 3px}.listing:hover{background:#e5e5e5}";document.head.appendChild(st);jQuery('body').append('<div id="serverBrowser" class="overlay" style="display:none;"><div class="valign"><div class="popupbox"><div class="popheader"><h3>Agariomods Ogar Server Browser</h3></div>\
	<div class="scrollable"><div id="serverlist" style="width:100%;"></div></div><div class="popupbuttons"><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" style=" display: block; float: left; "> <input type="hidden" name="cmd" value="_s-xclick"> <input type="hidden" name="hosted_button_id" value="TJBQTYEC9NWZS"> <input type="image" src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal"> <img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1"> </form><button onclick="closeServerbrowser()" type="button" style="transform:translateX(-74%);margin:4px"\
	class="btn btn-danger">Back</button><button id="rsb" onclick="openServerbrowser(true)" class="btn btn-info" type="button" style="float:right;margin:4px;">Refresh <i class="glyphicon glyphicon-refresh"></i></button></div></div></div></div>');if(a)return;jQuery('#settings').prepend('<button type="button" id="opnBrowser" onclick="openServerbrowser();" style="position:relative;top:-8px;width:100%" class="btn btn-success">Agariomods Private Servers</button><br>');jQuery('body').append('<div id="chat" style="display:none"><div id="chatlines"></div><div id="chatinput" style="display:none" class="input-group">\
	<input type="text" id="chatinputfield" class="form-control" maxlength="120" onblur="tChat(!0)"><span class="input-group-btn">\
	<button onclick="sendMSG()" class="btn btn-default" type="button">Send</button></span></div></div><div id="gps" style="display:none"><span>GPS (X,Y):&nbsp</span><div id="coords"><span>(</span><input min="0" type="text" class="coord" maxlength="5"/><span>,</span><input min="0" type="text" class="coord"  maxlength="5"/><span>)</span></div><button style="margin-left:5px" class="btn btn-info" onclick="var a=document.getElementsByClassName(\'coord\');window.nav(Math.floor(a[0].value),Math.floor(a[1].value),true);$(\'.coord\').blur()">Go</button><button style="margin-left:5px" class="btn btn-danger" onclick="nav(0,0,false)">Stop</button></div>');};function best(name,data){if(data){var oldData=localStorage.getItem("best_"+name);if(typeof localStorage.getItem("best_"+name)==undefined){oldData=0;}
if(data>oldData){localStorage.setItem("best_"+name,data);}}
if(localStorage.getItem("best_"+name)!=null){return localStorage.getItem("best_"+name)}else{return'0'};}
function alltime(name,data){data*=1;var a=localStorage.getItem("total_"+name);if(a==null){a=0;}else a=parseFloat(a);if(data){a+=data;localStorage.setItem("total_"+name,a);}
return a;}
var flashms=725;function flash(item){$(item).css({"background-color":"white","color":"black"});setTimeout(function(){$(item).css({"background-color":"transparent","color":"white"})},flashms);setTimeout(function(){$(item).css({"background-color":"white","color":"black"})},flashms*2);setTimeout(function(){$(item).css({"background-color":"transparent","color":"white"})},flashms*3);setTimeout(function(){$(item).css({"background-color":"white","color":"black"})},flashms*4);setTimeout(function(){$(item).css({"background-color":"transparent","color":"white"})},flashms*5);}})();}catch(e){window.onmoderror()}